import{j as n,u as pe,b as ne,a as et}from"./tanstack-DVJTcRV8.js";import{r as w,b as tt}from"./vendor-C5yldPn0.js";import{s as G}from"./client-DM5R7jeC.js";import{B as _,b as at}from"./button-BX6zCSRs.js";import{C as be,d as we,a as nt,b as rt}from"./card-SoYFlhNd.js";import{C as X,S as st,a as it,b as ot,c as ct,d as dt,T as lt,e as ut,f as mt,g as ht,B as ft}from"./select-D7sMeC_8.js";import{S as T}from"./skeleton-CttmANMB.js";import{A as ye,a as je,b as ve}from"./alert-DR_u1Pem.js";import{c as J,a as M,e as gt,f as ke,P as ie,h as le,n as xt,i as pt,g as bt,L as wt,u as F}from"./index-8CL0dTvz.js";import{D as yt,a as jt,b as vt,c as kt,A as Pe,t as Ne,g as Ce,h as Me,i as Se,j as De,k as Ee,l as Te,m as Oe,X as We}from"./alert-dialog-C4r8hXqJ.js";import{C as Pt,T as Nt}from"./truck-CZ39DZyQ.js";import{P as Ct}from"./package-BDEB7bYK.js";import{T as qe}from"./terminal-DiBHdVSy.js";import{U as Mt}from"./user-BLFaAwLs.js";import{M as St,R as Ae}from"./refresh-cw-XQiI19FT.js";import{C as Dt}from"./credit-card-Jj9bd1ZB.js";import{C as Et}from"./calendar-DUk_IQKn.js";import{u as Tt}from"./use-sound-BZ_EAx1q.js";import{u as Ot}from"./index-B4cp2llV.js";import{S as _e}from"./shopping-cart-Bj4tRBVQ.js";import{D as Wt}from"./dollar-sign-DgQTTCEP.js";import{T as qt}from"./trash-2-elOBTc6v.js";import"./supabase-SdGmRSUE.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=J("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=J("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=J("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=J("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);function D(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function I(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Fe=6048e5,It=864e5;let Bt={};function te(){return Bt}function U(e,t){var c,d,u,m;const a=te(),r=(t==null?void 0:t.weekStartsOn)??((d=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??a.weekStartsOn??((m=(u=a.locale)==null?void 0:u.options)==null?void 0:m.weekStartsOn)??0,s=D(e),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function ee(e){return U(e,{weekStartsOn:1})}function Re(e){const t=D(e),a=t.getFullYear(),r=I(e,0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);const s=ee(r),i=I(e,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const o=ee(i);return t.getTime()>=s.getTime()?a+1:t.getTime()>=o.getTime()?a:a-1}function ue(e){const t=D(e);return t.setHours(0,0,0,0),t}function me(e){const t=D(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+e-+a}function $t(e,t){const a=ue(e),r=ue(t),s=+a-me(a),i=+r-me(r);return Math.round((s-i)/It)}function Ht(e){const t=Re(e),a=I(e,0);return a.setFullYear(t,0,4),a.setHours(0,0,0,0),ee(a)}function zt(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Xt(e){if(!zt(e)&&typeof e!="number")return!1;const t=D(e);return!isNaN(Number(t))}function Qt(e){const t=D(e),a=I(e,0);return a.setFullYear(t.getFullYear(),0,1),a.setHours(0,0,0,0),a}const Vt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Gt=(e,t,a)=>{let r;const s=Vt[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r};function Q(e){return(t={})=>{const a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}const Jt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ut={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Kt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Zt={date:Q({formats:Jt,defaultWidth:"full"}),time:Q({formats:Ut,defaultWidth:"full"}),dateTime:Q({formats:Kt,defaultWidth:"full"})},ea={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ta=(e,t,a,r)=>ea[e];function O(e){return(t,a)=>{const r=a!=null&&a.context?String(a.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,c=a!=null&&a.width?String(a.width):o;s=e.formattingValues[c]||e.formattingValues[o]}else{const o=e.defaultWidth,c=a!=null&&a.width?String(a.width):e.defaultWidth;s=e.values[c]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const aa={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},na={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ra={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},sa={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ia={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},oa={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ca=(e,t)=>{const a=Number(e),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},da={ordinalNumber:ca,era:O({values:aa,defaultWidth:"wide"}),quarter:O({values:na,defaultWidth:"wide",argumentCallback:e=>e-1}),month:O({values:ra,defaultWidth:"wide"}),day:O({values:sa,defaultWidth:"wide"}),dayPeriod:O({values:ia,defaultWidth:"wide",formattingValues:oa,defaultFormattingWidth:"wide"})};function W(e){return(t,a={})=>{const r=a.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(c)?ua(c,x=>x.test(o)):la(c,x=>x.test(o));let u;u=e.valueCallback?e.valueCallback(d):d,u=a.valueCallback?a.valueCallback(u):u;const m=t.slice(o.length);return{value:u,rest:m}}}function la(e,t){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a}function ua(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a}function Ye(e){return(t,a={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=a.valueCallback?a.valueCallback(o):o;const c=t.slice(s.length);return{value:o,rest:c}}}const ma=/^(\d+)(th|st|nd|rd)?/i,ha=/\d+/i,fa={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ga={any:[/^b/i,/^(a|c)/i]},xa={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},pa={any:[/1/i,/2/i,/3/i,/4/i]},ba={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wa={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ya={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ja={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},va={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ka={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Pa={ordinalNumber:Ye({matchPattern:ma,parsePattern:ha,valueCallback:e=>parseInt(e,10)}),era:W({matchPatterns:fa,defaultMatchWidth:"wide",parsePatterns:ga,defaultParseWidth:"any"}),quarter:W({matchPatterns:xa,defaultMatchWidth:"wide",parsePatterns:pa,defaultParseWidth:"any",valueCallback:e=>e+1}),month:W({matchPatterns:ba,defaultMatchWidth:"wide",parsePatterns:wa,defaultParseWidth:"any"}),day:W({matchPatterns:ya,defaultMatchWidth:"wide",parsePatterns:ja,defaultParseWidth:"any"}),dayPeriod:W({matchPatterns:va,defaultMatchWidth:"any",parsePatterns:ka,defaultParseWidth:"any"})},Na={code:"en-US",formatDistance:Gt,formatLong:Zt,formatRelative:ta,localize:da,match:Pa,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ca(e){const t=D(e);return $t(t,Qt(t))+1}function Ma(e){const t=D(e),a=+ee(t)-+Ht(t);return Math.round(a/Fe)+1}function Le(e,t){var m,x,y,j;const a=D(e),r=a.getFullYear(),s=te(),i=(t==null?void 0:t.firstWeekContainsDate)??((x=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??s.firstWeekContainsDate??((j=(y=s.locale)==null?void 0:y.options)==null?void 0:j.firstWeekContainsDate)??1,o=I(e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const c=U(o,t),d=I(e,0);d.setFullYear(r,0,i),d.setHours(0,0,0,0);const u=U(d,t);return a.getTime()>=c.getTime()?r+1:a.getTime()>=u.getTime()?r:r-1}function Sa(e,t){var c,d,u,m;const a=te(),r=(t==null?void 0:t.firstWeekContainsDate)??((d=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(u=a.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,s=Le(e,t),i=I(e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),U(i,t)}function Da(e,t){const a=D(e),r=+U(a,t)-+Sa(a,t);return Math.round(r/Fe)+1}function p(e,t){const a=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return a+r}const q={y(e,t){const a=e.getFullYear(),r=a>0?a:1-a;return p(t==="yy"?r%100:r,t.length)},M(e,t){const a=e.getMonth();return t==="M"?String(a+1):p(a+1,2)},d(e,t){return p(e.getDate(),t.length)},a(e,t){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(e,t){return p(e.getHours()%12||12,t.length)},H(e,t){return p(e.getHours(),t.length)},m(e,t){return p(e.getMinutes(),t.length)},s(e,t){return p(e.getSeconds(),t.length)},S(e,t){const a=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,a-3));return p(s,t.length)}},z={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},he={G:function(e,t,a){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})}},y:function(e,t,a){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return a.ordinalNumber(s,{unit:"year"})}return q.y(e,t)},Y:function(e,t,a,r){const s=Le(e,r),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return p(o,2)}return t==="Yo"?a.ordinalNumber(i,{unit:"year"}):p(i,t.length)},R:function(e,t){const a=Re(e);return p(a,t.length)},u:function(e,t){const a=e.getFullYear();return p(a,t.length)},Q:function(e,t,a){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return p(r,2);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,a){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return p(r,2);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,a){const r=e.getMonth();switch(t){case"M":case"MM":return q.M(e,t);case"Mo":return a.ordinalNumber(r+1,{unit:"month"});case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,a){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return p(r+1,2);case"Lo":return a.ordinalNumber(r+1,{unit:"month"});case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,a,r){const s=Da(e,r);return t==="wo"?a.ordinalNumber(s,{unit:"week"}):p(s,t.length)},I:function(e,t,a){const r=Ma(e);return t==="Io"?a.ordinalNumber(r,{unit:"week"}):p(r,t.length)},d:function(e,t,a){return t==="do"?a.ordinalNumber(e.getDate(),{unit:"date"}):q.d(e,t)},D:function(e,t,a){const r=Ca(e);return t==="Do"?a.ordinalNumber(r,{unit:"dayOfYear"}):p(r,t.length)},E:function(e,t,a){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,a,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return p(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(s,{width:"short",context:"formatting"});case"eeee":default:return a.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,a,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return p(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(s,{width:"narrow",context:"standalone"});case"cccccc":return a.day(s,{width:"short",context:"standalone"});case"cccc":default:return a.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,a){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return p(s,t.length);case"io":return a.ordinalNumber(s,{unit:"day"});case"iii":return a.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(r,{width:"short",context:"formatting"});case"iiii":default:return a.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,a){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,a){const r=e.getHours();let s;switch(r===12?s=z.noon:r===0?s=z.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,a){const r=e.getHours();let s;switch(r>=17?s=z.evening:r>=12?s=z.afternoon:r>=4?s=z.morning:s=z.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,a){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),a.ordinalNumber(r,{unit:"hour"})}return q.h(e,t)},H:function(e,t,a){return t==="Ho"?a.ordinalNumber(e.getHours(),{unit:"hour"}):q.H(e,t)},K:function(e,t,a){const r=e.getHours()%12;return t==="Ko"?a.ordinalNumber(r,{unit:"hour"}):p(r,t.length)},k:function(e,t,a){let r=e.getHours();return r===0&&(r=24),t==="ko"?a.ordinalNumber(r,{unit:"hour"}):p(r,t.length)},m:function(e,t,a){return t==="mo"?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):q.m(e,t)},s:function(e,t,a){return t==="so"?a.ordinalNumber(e.getSeconds(),{unit:"second"}):q.s(e,t)},S:function(e,t){return q.S(e,t)},X:function(e,t,a){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return ge(r);case"XXXX":case"XX":return L(r);case"XXXXX":case"XXX":default:return L(r,":")}},x:function(e,t,a){const r=e.getTimezoneOffset();switch(t){case"x":return ge(r);case"xxxx":case"xx":return L(r);case"xxxxx":case"xxx":default:return L(r,":")}},O:function(e,t,a){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+fe(r,":");case"OOOO":default:return"GMT"+L(r,":")}},z:function(e,t,a){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+fe(r,":");case"zzzz":default:return"GMT"+L(r,":")}},t:function(e,t,a){const r=Math.trunc(e.getTime()/1e3);return p(r,t.length)},T:function(e,t,a){const r=e.getTime();return p(r,t.length)}};function fe(e,t=""){const a=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?a+String(s):a+String(s)+t+p(i,2)}function ge(e,t){return e%60===0?(e>0?"-":"+")+p(Math.abs(e)/60,2):L(e,t)}function L(e,t=""){const a=e>0?"-":"+",r=Math.abs(e),s=p(Math.trunc(r/60),2),i=p(r%60,2);return a+s+t+i}const xe=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ie=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Ea=(e,t)=>{const a=e.match(/(P+)(p+)?/)||[],r=a[1],s=a[2];if(!s)return xe(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",xe(r,t)).replace("{{time}}",Ie(s,t))},Ta={p:Ie,P:Ea},Oa=/^D+$/,Wa=/^Y+$/,qa=["D","DD","YY","YYYY"];function Aa(e){return Oa.test(e)}function _a(e){return Wa.test(e)}function Fa(e,t,a){const r=Ra(e,t,a);if(console.warn(r),qa.includes(e))throw new RangeError(r)}function Ra(e,t,a){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ya=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,La=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ia=/^'([^]*?)'?$/,Ba=/''/g,$a=/[a-zA-Z]/;function Ha(e,t,a){var m,x,y,j,k,b,v,l;const r=te(),s=(a==null?void 0:a.locale)??r.locale??Na,i=(a==null?void 0:a.firstWeekContainsDate)??((x=(m=a==null?void 0:a.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??r.firstWeekContainsDate??((j=(y=r.locale)==null?void 0:y.options)==null?void 0:j.firstWeekContainsDate)??1,o=(a==null?void 0:a.weekStartsOn)??((b=(k=a==null?void 0:a.locale)==null?void 0:k.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((l=(v=r.locale)==null?void 0:v.options)==null?void 0:l.weekStartsOn)??0,c=D(e);if(!Xt(c))throw new RangeError("Invalid time value");let d=t.match(La).map(h=>{const g=h[0];if(g==="p"||g==="P"){const P=Ta[g];return P(h,s.formatLong)}return h}).join("").match(Ya).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const g=h[0];if(g==="'")return{isToken:!1,value:za(h)};if(he[g])return{isToken:!0,value:h};if(g.match($a))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:h}});s.localize.preprocessor&&(d=s.localize.preprocessor(c,d));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return d.map(h=>{if(!h.isToken)return h.value;const g=h.value;(!(a!=null&&a.useAdditionalWeekYearTokens)&&_a(g)||!(a!=null&&a.useAdditionalDayOfYearTokens)&&Aa(g))&&Fa(g,t,String(e));const P=he[g[0]];return P(c,g,s.localize,u)}).join("")}function za(e){const t=e.match(Ia);return t?t[1].replace(Ba,"'"):e}const Xa={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},Qa=(e,t,a)=>{let r;const s=Xa[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"em "+r:"há "+r:r},Va={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},Ga={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ja={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ua={date:Q({formats:Va,defaultWidth:"full"}),time:Q({formats:Ga,defaultWidth:"full"}),dateTime:Q({formats:Ja,defaultWidth:"full"})},Ka={lastWeek:e=>{const t=e.getDay();return"'"+(t===0||t===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},Za=(e,t,a,r)=>{const s=Ka[e];return typeof s=="function"?s(t):s},en={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},tn={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},an={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},nn={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},rn={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},sn={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},on=(e,t)=>{const a=Number(e);return(t==null?void 0:t.unit)==="week"?a+"ª":a+"º"},cn={ordinalNumber:on,era:O({values:en,defaultWidth:"wide"}),quarter:O({values:tn,defaultWidth:"wide",argumentCallback:e=>e-1}),month:O({values:an,defaultWidth:"wide"}),day:O({values:nn,defaultWidth:"wide"}),dayPeriod:O({values:rn,defaultWidth:"wide",formattingValues:sn,defaultFormattingWidth:"wide"})},dn=/^(\d+)[ºªo]?/i,ln=/\d+/i,un={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},mn={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},hn={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},fn={any:[/1/i,/2/i,/3/i,/4/i]},gn={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},xn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},pn={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},bn={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},wn={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},yn={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},jn={ordinalNumber:Ye({matchPattern:dn,parsePattern:ln,valueCallback:e=>parseInt(e,10)}),era:W({matchPatterns:un,defaultMatchWidth:"wide",parsePatterns:mn,defaultParseWidth:"any"}),quarter:W({matchPatterns:hn,defaultMatchWidth:"wide",parsePatterns:fn,defaultParseWidth:"any",valueCallback:e=>e+1}),month:W({matchPatterns:gn,defaultMatchWidth:"wide",parsePatterns:xn,defaultParseWidth:"any"}),day:W({matchPatterns:pn,defaultMatchWidth:"wide",parsePatterns:bn,defaultParseWidth:"any"}),dayPeriod:W({matchPatterns:wn,defaultMatchWidth:"any",parsePatterns:yn,defaultParseWidth:"any"})},vn={code:"pt-BR",formatDistance:Qa,formatLong:Ua,formatRelative:Za,localize:cn,match:jn,options:{weekStartsOn:0,firstWeekContainsDate:1}},kn={pending:{label:"Pendente",icon:Pt,color:"bg-yellow-500"},preparing:{label:"Em Preparação",icon:Ct,color:"bg-orange-500"},ready:{label:"Pronto",icon:Pn,color:"bg-green-500"},delivering:{label:"Em Entrega",icon:Nt,color:"bg-blue-500"},delivered:{label:"Entregue",icon:Nn,color:"bg-purple-500"},cancelled:{label:"Cancelado",icon:Cn,color:"bg-destructive"},pending_payment:{label:"Aguardando Pagamento",icon:Rt,color:"bg-gray-500"}},Pn=()=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),n.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),Nn=()=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M18 6l-12 12"}),n.jsx("path",{d:"M6 6l12 12"})]}),Cn=()=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"m15 9-6 6"}),n.jsx("path",{d:"m9 9 6 6"})]}),Mn=async e=>{const{data:t,error:a}=await G.from("order_items").select("*, products(name)").eq("order_id",e);if(a)throw new Error(a.message);return t},Sn=({order:e,isOpen:t,onClose:a})=>{var Y,B,$,K,Z;const[r,s]=w.useState([]),[i,o]=w.useState(!1),[c,d]=w.useState(null);w.useEffect(()=>{t&&(async()=>{if(e!=null&&e.id){o(!0),d(null);try{const E=await Mn(e.id);s(E)}catch(E){console.error("Failed to fetch order items:",E),d("Falha ao carregar itens do pedido.")}finally{o(!1)}}})()},[e==null?void 0:e.id,t]);const u=((Y=e==null?void 0:e.customer)==null?void 0:Y.name)||"Cliente Desconhecido",m=(B=e==null?void 0:e.customer)==null?void 0:B.phone,x=($=e==null?void 0:e.customer)==null?void 0:$.email,y=(K=e==null?void 0:e.customer)==null?void 0:K.cpf_cnpj,j=e==null?void 0:e.delivery_address,k=((Z=e==null?void 0:e.payment_methods)==null?void 0:Z.name)||"Não especificado",b=e!=null&&e.status?kn[e.status]:null,v=e!=null&&e.id?e.id.slice(-4):"N/A",l=e!=null&&e.created_at?new Date(e.created_at):null,h=l?Ha(l,"dd 'de' MMMM 'de' yyyy 'às' HH:mm",{locale:vn}):"Data desconhecida",g=e!=null&&e.change_for?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.change_for):null,P=e!=null&&e.delivery_fee?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.delivery_fee):"Grátis";return n.jsx(yt,{open:t,onOpenChange:a,children:n.jsxs(jt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(vt,{children:n.jsxs(kt,{className:"flex items-center justify-between",children:[n.jsxs("span",{children:["Detalhes do Pedido #",v]}),b&&n.jsxs("span",{className:M("text-xs font-semibold px-2.5 py-0.5 rounded-full text-white flex items-center",b.color),children:[n.jsx(b.icon,{className:"w-3 h-3 mr-1"}),b.label]})]})}),c&&n.jsxs(ye,{variant:"destructive",children:[n.jsx(qe,{className:"h-4 w-4"}),n.jsx(je,{children:"Erro"}),n.jsx(ve,{children:c})]}),i?n.jsxs("div",{className:"space-y-4",children:[n.jsx(T,{className:"h-4 w-1/3"}),n.jsx(T,{className:"h-10 w-full"}),n.jsx(T,{className:"h-4 w-1/3"}),n.jsx(T,{className:"h-20 w-full"}),n.jsx(T,{className:"h-4 w-1/3"}),n.jsx("div",{className:"space-y-2",children:[...Array(3)].map((S,E)=>n.jsx(T,{className:"h-12 w-full"},E))}),n.jsx(T,{className:"h-4 w-1/3"}),n.jsx(T,{className:"h-6 w-full"})]}):e&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx(Mt,{className:"h-4 w-4 mt-0.5 mr-2 text-muted-foreground flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Cliente"}),n.jsx("p",{children:u}),y&&n.jsxs("p",{className:"text-muted-foreground text-xs",children:["CPF/CNPJ: ",y]})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx(Lt,{className:"h-4 w-4 mt-0.5 mr-2 text-muted-foreground flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Telefone"}),n.jsx("p",{children:m||"Não informado"}),x&&n.jsx("p",{className:"text-muted-foreground text-xs",children:x})]})]}),n.jsxs("div",{className:"flex items-start md:col-span-2",children:[n.jsx(St,{className:"h-4 w-4 mt-0.5 mr-2 text-muted-foreground flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Endereço de Entrega"}),n.jsx("p",{children:j||"Não informado"})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx(Dt,{className:"h-4 w-4 mt-0.5 mr-2 text-muted-foreground flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Método de Pagamento"}),n.jsx("p",{children:k}),g&&n.jsxs("p",{className:"text-muted-foreground text-xs",children:["Troco para: ",g]})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx(Et,{className:"h-4 w-4 mt-0.5 mr-2 text-muted-foreground flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Data do Pedido"}),n.jsx("p",{children:h})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Itens do Pedido"}),n.jsx("div",{className:"space-y-2",children:r.map(S=>{var E;return n.jsxs("div",{className:"flex justify-between items-start p-2 bg-muted/50 rounded",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:((E=S.products)==null?void 0:E.name)||"Produto não encontrado"}),S.notes&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Obs: ",S.notes]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{children:[S.quantity," x ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(S.unit_price)]}),n.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(S.subtotal)})]})]},S.id)})})]}),n.jsxs("div",{className:"pt-4 border-t",children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("span",{children:"Subtotal"}),n.jsx("span",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.total_amount-(e.delivery_fee||0))})]}),n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("span",{children:"Taxa de Entrega"}),n.jsx("span",{children:P})]}),n.jsxs("div",{className:"flex justify-between font-bold text-lg pt-2 border-t",children:[n.jsx("span",{children:"Total"}),n.jsx("span",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.total_amount)})]})]}),n.jsx("div",{className:"pt-4",children:e.notes&&n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"font-medium mb-1",children:"Observações do Cliente:"}),n.jsx("p",{className:"bg-muted p-2 rounded",children:e.notes})]})})]}),n.jsx("div",{className:"flex justify-end pt-4",children:n.jsx(_,{onClick:a,children:"Fechar"})})]})})},Be=({className:e,...t})=>n.jsx("nav",{role:"navigation","aria-label":"pagination",className:M("mx-auto flex w-full justify-center",e),...t});Be.displayName="Pagination";const $e=w.forwardRef(({className:e,...t},a)=>n.jsx("ul",{ref:a,className:M("flex flex-row items-center gap-1",e),...t}));$e.displayName="PaginationContent";const A=w.forwardRef(({className:e,...t},a)=>n.jsx("li",{ref:a,className:M("",e),...t}));A.displayName="PaginationItem";const V=({className:e,isActive:t,size:a="icon",...r})=>n.jsx("a",{"aria-current":t?"page":void 0,className:M(at({variant:t?"outline":"ghost",size:a}),e),...r});V.displayName="PaginationLink";const He=({className:e,...t})=>n.jsxs(V,{"aria-label":"Go to previous page",size:"default",className:M("gap-1 pl-2.5",e),...t,children:[n.jsx(At,{className:"h-4 w-4"}),n.jsx("span",{children:"Previous"})]});He.displayName="PaginationPrevious";const ze=({className:e,...t})=>n.jsxs(V,{"aria-label":"Go to next page",size:"default",className:M("gap-1 pr-2.5",e),...t,children:[n.jsx("span",{children:"Next"}),n.jsx(_t,{className:"h-4 w-4"})]});ze.displayName="PaginationNext";const re=({className:e,...t})=>n.jsxs("span",{"aria-hidden":!0,className:M("flex h-9 w-9 items-center justify-center",e),...t,children:[n.jsx(Ft,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"More pages"})]});re.displayName="PaginationEllipsis";const Dn=({currentPage:e,totalPages:t,onPageChange:a})=>{if(t<=1)return null;const s=(()=>{const i=[],c=Math.max(1,e-Math.floor(2.5)),d=Math.min(t,c+5-1);if(d-c+1<5){const u=Math.max(1,d-5+1);for(let m=u;m<=d;m++)i.push(m)}else for(let u=c;u<=d;u++)i.push(u);return i})();return n.jsx(Be,{children:n.jsxs($e,{children:[n.jsx(A,{children:n.jsx(He,{onClick:()=>a(e-1),className:M(e===1&&"pointer-events-none opacity-50")})}),s[0]>1&&n.jsxs(n.Fragment,{children:[n.jsx(A,{children:n.jsx(V,{onClick:()=>a(1),children:"1"})}),s[0]>2&&n.jsx(A,{children:n.jsx(re,{})})]}),s.map(i=>n.jsx(A,{children:n.jsx(V,{isActive:i===e,onClick:()=>a(i),children:i})},i)),s[s.length-1]<t&&n.jsxs(n.Fragment,{children:[s[s.length-1]<t-1&&n.jsx(A,{children:n.jsx(re,{})}),n.jsx(A,{children:n.jsx(V,{onClick:()=>a(t),children:t})})]}),n.jsx(A,{children:n.jsx(ze,{onClick:()=>a(e+1),className:M(e===t&&"pointer-events-none opacity-50")})})]})})};var ae="Checkbox",[En,or]=gt(ae),[Tn,oe]=En(ae);function On(e){const{__scopeCheckbox:t,checked:a,children:r,defaultChecked:s,disabled:i,form:o,name:c,onCheckedChange:d,required:u,value:m="on",internal_do_not_use_render:x}=e,[y,j]=bt({prop:a,defaultProp:s??!1,onChange:d,caller:ae}),[k,b]=w.useState(null),[v,l]=w.useState(null),h=w.useRef(!1),g=k?!!o||!!k.closest("form"):!0,P={checked:y,disabled:i,setChecked:j,control:k,setControl:b,name:c,form:o,value:m,hasConsumerStoppedPropagationRef:h,required:u,defaultChecked:R(s)?!1:s,isFormControl:g,bubbleInput:v,setBubbleInput:l};return n.jsx(Tn,{scope:t,...P,children:Wn(x)?x(P):r})}var Xe="CheckboxTrigger",Qe=w.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...r},s)=>{const{control:i,value:o,disabled:c,checked:d,required:u,setControl:m,setChecked:x,hasConsumerStoppedPropagationRef:y,isFormControl:j,bubbleInput:k}=oe(Xe,e),b=ke(s,m),v=w.useRef(d);return w.useEffect(()=>{const l=i==null?void 0:i.form;if(l){const h=()=>x(v.current);return l.addEventListener("reset",h),()=>l.removeEventListener("reset",h)}},[i,x]),n.jsx(ie.button,{type:"button",role:"checkbox","aria-checked":R(d)?"mixed":d,"aria-required":u,"data-state":Ke(d),"data-disabled":c?"":void 0,disabled:c,value:o,...r,ref:b,onKeyDown:le(t,l=>{l.key==="Enter"&&l.preventDefault()}),onClick:le(a,l=>{x(h=>R(h)?!0:!h),k&&j&&(y.current=l.isPropagationStopped(),y.current||l.stopPropagation())})})});Qe.displayName=Xe;var ce=w.forwardRef((e,t)=>{const{__scopeCheckbox:a,name:r,checked:s,defaultChecked:i,required:o,disabled:c,value:d,onCheckedChange:u,form:m,...x}=e;return n.jsx(On,{__scopeCheckbox:a,checked:s,defaultChecked:i,disabled:c,required:o,onCheckedChange:u,name:r,form:m,value:d,internal_do_not_use_render:({isFormControl:y})=>n.jsxs(n.Fragment,{children:[n.jsx(Qe,{...x,ref:t,__scopeCheckbox:a}),y&&n.jsx(Ue,{__scopeCheckbox:a})]})})});ce.displayName=ae;var Ve="CheckboxIndicator",Ge=w.forwardRef((e,t)=>{const{__scopeCheckbox:a,forceMount:r,...s}=e,i=oe(Ve,a);return n.jsx(xt,{present:r||R(i.checked)||i.checked===!0,children:n.jsx(ie.span,{"data-state":Ke(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});Ge.displayName=Ve;var Je="CheckboxBubbleInput",Ue=w.forwardRef(({__scopeCheckbox:e,...t},a)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:c,disabled:d,name:u,value:m,form:x,bubbleInput:y,setBubbleInput:j}=oe(Je,e),k=ke(a,j),b=Ot(i),v=pt(r);w.useEffect(()=>{const h=y;if(!h)return;const g=window.HTMLInputElement.prototype,Y=Object.getOwnPropertyDescriptor(g,"checked").set,B=!s.current;if(b!==i&&Y){const $=new Event("click",{bubbles:B});h.indeterminate=R(i),Y.call(h,R(i)?!1:i),h.dispatchEvent($)}},[y,b,i,s]);const l=w.useRef(R(i)?!1:i);return n.jsx(ie.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??l.current,required:c,disabled:d,name:u,value:m,form:x,...t,tabIndex:-1,ref:k,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Ue.displayName=Je;function Wn(e){return typeof e=="function"}function R(e){return e==="indeterminate"}function Ke(e){return R(e)?"indeterminate":e?"checked":"unchecked"}const de=w.forwardRef(({className:e,...t},a)=>n.jsx(ce,{ref:a,className:M("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(Ge,{className:M("flex items-center justify-center text-current"),children:n.jsx(X,{className:"h-4 w-4"})})}));de.displayName=ce.displayName;const Ze={pending:{label:"Pendente",icon:_e,color:"bg-yellow-500 hover:bg-yellow-600"},preparing:{label:"Em Preparação",icon:X,color:"bg-orange-500 hover:bg-orange-600"},ready:{label:"Pronto",icon:X,color:"bg-green-500 hover:bg-green-600"},delivering:{label:"Em Entrega",icon:X,color:"bg-indigo-500 hover:bg-indigo-600"},delivered:{label:"Entregue",icon:X,color:"bg-primary hover:bg-primary/90"},cancelled:{label:"Cancelado",icon:We,color:"bg-destructive hover:bg-destructive/90"},pending_payment:{label:"Aguardando Pag.",icon:Wt,color:"bg-gray-500 hover:bg-gray-600"}},qn=[{value:"pending",label:"Mudar para Pendente"},{value:"preparing",label:"Mudar para Em Preparação"},{value:"ready",label:"Mudar para Pronto"},{value:"delivering",label:"Mudar para Em Entrega"},{value:"delivered",label:"Mudar para Entregue"},{value:"cancelled",label:"Mudar para Cancelado"},{value:"pending_payment",label:"Mudar para Aguardando Pag."},{value:"delete",label:"Excluir Permanentemente"}],se=12,An=async(e,t,a)=>{const r=a*se,s=r+se-1;let i=G.from("orders").select("*, customer:customers(name, phone)",{count:"exact"}).eq("restaurant_id",e);t!=="all"&&(i=i.eq("status",t));const{data:o,error:c,count:d}=await i.order("created_at",{ascending:!1}).range(r,s);if(c)throw new Error(`Erro ao buscar pedidos: ${c.message}`);return{orders:o,count:d||0}},_n=({order:e,onViewDetails:t,onAccept:a,onDecline:r,onDelete:s,isSelected:i,onSelect:o})=>{var m;const c=Ze[e.status||"pending"],d=((m=e.customer)==null?void 0:m.name)||"Cliente Desconhecido",u=e.created_at?new Date(e.created_at).getTime().toString().slice(-4):"N/A";return n.jsxs(be,{className:"shadow-md hover:shadow-lg transition-shadow duration-300 flex flex-col relative",children:[n.jsx("div",{className:"absolute top-3 left-3 z-10",children:n.jsx(de,{checked:i,onCheckedChange:x=>o(e.id,!!x),className:"h-5 w-5"})}),n.jsxs(nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 pl-12",children:[n.jsxs(rt,{className:"text-lg font-bold flex items-center gap-2",children:["Pedido #",u]}),n.jsxs(ft,{className:M("text-white",c.color),children:[n.jsx(c.icon,{className:"h-3 w-3 mr-1"}),c.label]})]}),n.jsxs(we,{className:"space-y-2 flex-grow flex flex-col justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Cliente: ",d]}),n.jsx("p",{className:"text-2xl font-extrabold text-primary",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.total_amount)})]}),n.jsxs("div",{className:"flex justify-end pt-2 border-t gap-2",children:[(e.status==="pending"||e.status==="pending_payment")&&n.jsxs(n.Fragment,{children:[n.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>r(e.id),children:[n.jsx(We,{className:"h-4 w-4 mr-1"})," Recusar"]}),n.jsxs(_,{variant:"default",size:"sm",onClick:()=>a(e.id),children:[n.jsx(X,{className:"h-4 w-4 mr-1"})," Aceitar"]})]}),n.jsx(_,{variant:"outline",size:"sm",onClick:()=>t(e),children:"Detalhes"}),n.jsxs(Pe,{children:[n.jsx(Ne,{asChild:!0,children:n.jsx(_,{variant:"ghost",size:"icon",className:"text-destructive hover:bg-destructive/10",children:n.jsx(qt,{className:"h-4 w-4"})})}),n.jsxs(Ce,{children:[n.jsxs(Me,{children:[n.jsx(Se,{children:"Tem certeza que deseja excluir?"}),n.jsxs(De,{children:["Esta ação é permanente. O pedido #",u," será excluído permanentemente do sistema, incluindo todos os itens associados."]})]}),n.jsxs(Ee,{children:[n.jsx(Te,{children:"Cancelar"}),n.jsx(Oe,{onClick:()=>s(e.id),className:"bg-destructive hover:bg-destructive/90",children:"Excluir Permanentemente"})]})]})]})]})]})]})},Fn=({status:e,onViewDetails:t,restaurantId:a,selectedOrders:r,setSelectedOrders:s,totalOrdersInView:i})=>{const o=pe(),{stopSoundLoop:c}=Tt(),[d,u]=w.useState(0),{data:m,isLoading:x,isError:y,error:j,refetch:k}=et({queryKey:["orders",e,a,d],queryFn:()=>An(a,e,d),enabled:!!a}),b=(m==null?void 0:m.orders)||[],v=(m==null?void 0:m.count)||0,l=Math.ceil(v/se),h=ne({mutationFn:async({orderId:f,newStatus:N})=>{const C=N==="pending"?"preparing":N,{error:H}=await G.from("orders").update({status:C}).eq("id",f);if(H)throw new Error(H.message);return C},onSuccess:f=>{F.success(`Pedido ${f==="preparing"?"aceito":"recusado"} com sucesso!`),o.invalidateQueries({queryKey:["orders"]})},onError:f=>F.error(`Erro ao atualizar pedido: ${f.message}`)}),g=ne({mutationFn:async f=>{const{error:N}=await G.from("orders").delete().eq("id",f);if(N)throw new Error(N.message)},onSuccess:()=>{F.success("Pedido excluído permanentemente."),o.invalidateQueries({queryKey:["orders"]})},onError:f=>F.error(`Erro ao excluir pedido: ${f.message}`)}),P=f=>{c(),h.mutate({orderId:f,newStatus:"preparing"})},Y=f=>{c(),h.mutate({orderId:f,newStatus:"cancelled"})},B=f=>{c(),t(f)},$=f=>{g.mutate(f)},K=w.useCallback(f=>{u(f-1)},[]),Z=w.useCallback((f,N)=>{s(C=>N?[...C,f]:C.filter(H=>H!==f))},[s]),S=w.useCallback(f=>{if(f){const N=b.map(C=>C.id);s(C=>[...new Set([...C,...N])])}else{const N=new Set(b.map(C=>C.id));s(C=>C.filter(H=>!N.has(H)))}},[b,s]),E=b.length>0&&b.every(f=>r.includes(f.id));return x?n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[...Array(4)].map((f,N)=>n.jsx(be,{children:n.jsx(we,{className:"p-4 space-y-3",children:n.jsx(T,{className:"h-32 w-full"})})},N))}):y?n.jsxs(ye,{variant:"destructive",children:[n.jsx(qe,{className:"h-4 w-4"}),n.jsx(je,{children:"Erro ao carregar pedidos"}),n.jsx(ve,{children:j instanceof Error?j.message:"Ocorreu um erro desconhecido."}),n.jsxs(_,{onClick:()=>k(),className:"mt-3",variant:"secondary",size:"sm",children:[n.jsx(Ae,{className:"h-4 w-4 mr-2"})," Tentar Novamente"]})]}):!b||b.length===0?n.jsxs("div",{className:"text-center py-12 bg-card rounded-lg border",children:[n.jsx(_e,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-lg font-semibold",children:"Nenhum pedido encontrado."}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Verifique o status selecionado ou aguarde novos pedidos."})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4 p-3 border rounded-lg bg-muted/50",children:[n.jsx(de,{checked:E,onCheckedChange:S,className:"h-5 w-5"}),n.jsxs("span",{className:"text-sm font-medium",children:["Selecionar todos (",b.length,") nesta página."]}),i>0&&n.jsxs("span",{className:"text-xs text-muted-foreground ml-auto",children:[i," pedidos selecionados no total."]})]}),n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:b.map(f=>n.jsx(_n,{order:f,onViewDetails:B,onAccept:P,onDecline:Y,onDelete:$,isSelected:r.includes(f.id),onSelect:Z},f.id))}),l>1&&n.jsx("div",{className:"flex justify-center pt-4",children:n.jsx(Dn,{currentPage:d+1,totalPages:l,onPageChange:K})})]})},cr=()=>{const{userRestaurantId:e}=tt(),t=pe(),[a,r]=w.useState(null),[s,i]=w.useState(!1),[o,c]=w.useState([]),[d,u]=w.useState(""),m=l=>{r(l),i(!0)},x=()=>{i(!1),r(null)},y=()=>{t.invalidateQueries({queryKey:["orders",e]}),F.info("Atualizando pedidos...",{description:"Buscando novos dados no servidor."})},j=ne({mutationFn:async({orderIds:l,action:h})=>{if(h==="delete"){const{error:g}=await G.from("orders").delete().in("id",l);if(g)throw new Error(g.message);return"deleted"}else{const g=h==="pending"?"preparing":h,{error:P}=await G.from("orders").update({status:g}).in("id",l);if(P)throw new Error(P.message);return"updated"}},onSuccess:(l,h)=>{if(l==="deleted")F.success(`${h.orderIds.length} pedidos excluídos permanentemente.`);else{const g=Ze[h.action].label;F.success(`${h.orderIds.length} pedidos atualizados para "${g}".`)}c([]),u(""),t.invalidateQueries({queryKey:["orders",e]})},onError:l=>{F.error(`Erro na ação em massa: ${l.message}`)}}),k=()=>{var l;!d||o.length===0||(d==="delete"?(l=document.getElementById("mass-delete-trigger"))==null||l.click():j.mutate({orderIds:o,action:d}))},b=[{value:"pending_payment",label:"Aguardando Pag."},{value:"pending",label:"Pendentes"},{value:"preparing",label:"Em Preparação"},{value:"ready",label:"Prontos"},{value:"delivering",label:"Em Entrega"},{value:"delivered",label:"Entregues"},{value:"cancelled",label:"Cancelados"},{value:"all",label:"Todos"}],v=j.isPending;return e?n.jsxs(n.Fragment,{children:[n.jsx(Sn,{order:a,isOpen:s,onClose:x}),n.jsxs(Pe,{children:[n.jsx(Ne,{asChild:!0,children:n.jsx("button",{id:"mass-delete-trigger",className:"hidden"})}),n.jsxs(Ce,{children:[n.jsxs(Me,{children:[n.jsxs(Se,{children:["Tem certeza que deseja excluir ",o.length," pedidos?"]}),n.jsxs(De,{children:["Esta ação é permanente. ",o.length," pedidos serão excluídos permanentemente do sistema."]})]}),n.jsxs(Ee,{children:[n.jsx(Te,{children:"Cancelar"}),n.jsx(Oe,{onClick:()=>j.mutate({orderIds:o,action:"delete"}),className:"bg-destructive hover:bg-destructive/90",disabled:v,children:v?"Excluindo...":"Excluir Permanentemente"})]})]})]}),n.jsxs("main",{className:"flex-1 p-4 sm:p-6 md:p-8 space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs(_,{variant:"outline",onClick:y,children:[n.jsx(Ae,{className:"h-4 w-4 mr-2"})," Atualizar Dados"]})}),o.length>0&&n.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-lg bg-card shadow-lg animate-fade-in",children:[n.jsx(Yt,{className:"h-5 w-5 text-primary mr-2"}),n.jsxs("span",{className:"text-sm font-medium mr-4",children:[o.length," selecionado(s)"]}),n.jsxs(st,{value:d,onValueChange:l=>u(l),children:[n.jsx(it,{className:"w-[200px]",children:n.jsx(ot,{placeholder:"Ação em Massa"})}),n.jsx(ct,{children:qn.map(l=>n.jsx(dt,{value:l.value,children:l.label},l.value))})]}),n.jsx(_,{onClick:k,disabled:!d||v,children:v?n.jsx(wt,{className:"h-4 w-4 animate-spin"}):"Aplicar"})]})]}),e?n.jsxs(lt,{defaultValue:"pending",children:[n.jsx(ut,{className:"w-full overflow-x-auto justify-start",children:b.map(l=>n.jsx(mt,{value:l.value,className:"whitespace-nowrap",children:l.label},l.value))}),b.map(l=>n.jsx(ht,{value:l.value,className:"mt-6",children:n.jsx(Fn,{status:l.value,onViewDetails:m,restaurantId:e,selectedOrders:o,setSelectedOrders:c,totalOrdersInView:o.length})},l.value))]}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(T,{className:"h-12 w-12 mx-auto mb-4"}),n.jsx("p",{children:"Carregando dados do restaurante..."})]})]})]}):n.jsx("div",{className:"flex h-screen items-center justify-center",children:"Carregando..."})};export{cr as default};
