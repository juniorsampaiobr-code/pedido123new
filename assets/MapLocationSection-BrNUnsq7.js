const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LocationPickerMap-QdwUZVcm.js","./tanstack-D8i8yNxB.js","./vendor-Dl0Wzy4_.js","./LocationPickerMap-Dgihpmma.css"])))=>i.map(i=>d[i]);
import{j as e}from"./tanstack-D8i8yNxB.js";import{R as h,r as l}from"./vendor-Dl0Wzy4_.js";import{I as v}from"./label-EhpmaY8e.js";import{b as y,v as w,u as o}from"./index-C7CLkozY.js";import{A as L,a as b,b as E}from"./alert-BiRJFJKa.js";import{_ as M}from"./supabase-A1WgB1xz.js";import{M as N}from"./map-pin-DvXcMx0Z.js";const _=s=>{let a=s.replace(/\D/g,"");return a.length>8&&(a=a.slice(0,8)),a.length>5&&(a=`${a.slice(0,5)}-${a.slice(5)}`),a},z=h.forwardRef(({className:s,value:a,onChange:n,...u},c)=>{const r=t=>{const m=t.target.value,i=_(m),d={...t,target:{...t.target,value:i}};n(d)};return e.jsx(v,{ref:c,type:"tel",className:y("w-full",s),placeholder:"00000-000",value:a,onChange:r,maxLength:9,...u})});z.displayName="ZipCodeInput";const C=l.lazy(()=>M(()=>import("./LocationPickerMap-QdwUZVcm.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),I=s=>e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"h-96 w-full rounded-lg bg-muted flex items-center justify-center",children:e.jsx(w,{})}),children:e.jsx(C,{...s})}),R=({markerPosition:s,onLocationChange:a,updateAddressFields:n,restaurant:u,mapKey:c})=>{const r=s[0],t=s[1],[m,i]=l.useState(!1);return l.useCallback(async(d,g)=>{i(!0);const j=o.loading("Buscando endereço para a nova localização...");try{const p=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${d}&lon=${g}&addressdetails=1`,x=await fetch(p);if(!x.ok)throw new Error("Falha ao obter detalhes do endereço.");const f=await x.json();f.address?(n(f.address),o.success("Endereço atualizado a partir do mapa.")):o.warning("Não foi possível encontrar um endereço para esta localização.")}catch(p){o.error(`Erro ao buscar endereço: ${p.message}`)}finally{i(!1),o.dismiss(j)}},[n]),e.jsxs("div",{className:"space-y-2 relative",children:[e.jsx("div",{className:"relative",children:e.jsx(I,{center:s,markerPosition:s,onLocationChange:a,isInteractive:!0},c)}),e.jsxs("div",{className:"text-xs text-muted-foreground flex justify-between",children:[e.jsxs("span",{children:["Latitude: ",r==null?void 0:r.toFixed(6)]}),e.jsxs("span",{children:["Longitude: ",t==null?void 0:t.toFixed(6)]})]}),e.jsxs(L,{variant:"default",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx(b,{children:"Ajuste a Localização"}),e.jsx(E,{children:"Arraste o pino azul para o local exato da entrega para garantir a precisão da taxa."})]})]})},V=h.memo(R);export{V as M,z as Z};
