import{j as e,u as Je,a as fe}from"./tanstack-CuXR15uk.js";import{r as c,R as ve,L as je,b as et}from"./vendor-C8dS00GB.js";import{s as R}from"./client-DZj4AdSj.js";import{c as U,b as y,d as Y,u as q,f as tt,g as F,P as $,n as Q,h as D,k as L,e as rt,L as st}from"./index-BpHful0c.js";import{A as re,a as se,b as oe}from"./alert-DPutq1d9.js";import{M as ot}from"./map-pin-ChDAbbnR.js";import{C as nt}from"./circle-check-big-wJcHECgy.js";import{a as at}from"./credit-card-DRuILGU6.js";import{C as ye,R as lt}from"./pt-BR-BuYFlPv2.js";import{C as ne,d as it}from"./card-C_U7HZMT.js";import{B as b,c as ct}from"./button-rGG64IHL.js";import{D as Se,a as Ne,b as Ce,c as _e,d as Pe,e as Ee,X as Re,u as dt}from"./dialog-ByHVS_BB.js";import{I as K}from"./label-DdASzcsa.js";import{D as Te}from"./dollar-sign-DRbZICiL.js";import{P as G}from"./plus-Frm8ZrY7.js";import{S as I}from"./shopping-cart-DlrpYzIv.js";import{O as Ae,a as Le,d as mt,b as De,D as Me,P as ut,R as ht}from"./index-cefeC7kr.js";import{c as ft}from"./index-BdQq_4o_.js";import{u as xt}from"./use-auth-status-DMYHApCp.js";import{C as pt,L as gt,S as xe}from"./CustomerProfileModal-D4hsgRNx.js";import{T as pe}from"./terminal-BrJj7DNv.js";import{U as bt}from"./user-9tpLxGqJ.js";import{P as wt}from"./phone-DQ0yBBii.js";import"./supabase-Cd7r4f-z.js";import"./format-BeKxgCCE.js";import"./index-DmR3tAS3.js";import"./types-C7MDFQzg.js";import"./form-CUnEKQWY.js";import"./PhoneInput-DV9B33Ql.js";import"./CpfCnpjInput-Cu3k9ZZV.js";import"./skeleton-DtKMiA3V.js";import"./store-BHvCnDi4.js";import"./package-Box6xLtf.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=U("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=U("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=U("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=U("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),vt=()=>{const t=new Date,s=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0");return`${s}:${r}`},jt=()=>new Date().getDay(),Oe=t=>{const s=jt(),r=vt(),n=t.find(d=>d.day_of_week===s);if(!n||!n.is_open)return{isOpen:!1,todayHours:"Fechado hoje"};const o=n.open_time,a=n.close_time;if(!o||!a)return{isOpen:!1,todayHours:"Horário não configurado"};const l=r>=o&&r<=a,i=`${o.substring(0,5)} - ${a.substring(0,5)}`;return{isOpen:l,todayHours:i}},yt=({restaurant:t,hours:s})=>{const{isOpen:r,todayHours:n}=Oe(s),o=[t.street,t.number,t.neighborhood,t.city,t.zip_code].filter(Boolean).join(", ");return e.jsxs("div",{className:"space-y-3 text-center",children:[o&&e.jsxs("div",{className:"flex items-center justify-center text-sm text-muted-foreground",children:[e.jsx(ot,{className:"h-4 w-4 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate max-w-full",children:o})]}),e.jsxs("div",{className:"flex items-center justify-center text-sm font-medium",children:[e.jsxs("div",{className:y("flex items-center gap-1 px-3 py-1 rounded-full",r?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"),children:[r?e.jsx(nt,{className:"h-4 w-4"}):e.jsx(at,{className:"h-4 w-4"}),e.jsx("span",{children:r?"Aberto Agora":"Fechado"})]}),e.jsxs("div",{className:"ml-4 flex items-center text-muted-foreground",children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:n})]})]})]})},St=({todayHours:t})=>e.jsxs(re,{variant:"destructive",className:"mb-6",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx(se,{children:"Loja Fechada"}),e.jsx(oe,{children:"A loja está fechada."})]}),Nt=({src:t,alt:s,className:r,...n})=>{const[o,a]=c.useState(!0),[l,i]=c.useState(!1),[d,u]=c.useState(t);c.useEffect(()=>{a(!0),i(!1),u(t)},[t]);const m=()=>{a(!1)},h=()=>{a(!1),i(!0),u("/placeholder.svg")};return e.jsxs("div",{className:y("relative overflow-hidden",r),children:[o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted animate-pulse",children:e.jsx(ge,{className:"h-8 w-8 text-muted-foreground"})}),l&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:e.jsx(ge,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("img",{src:d,alt:s,onLoad:m,onError:h,className:y("w-full h-full object-cover transition-opacity duration-500",o?"opacity-0":"opacity-100"),...n})]})},Ct=({isOpen:t,onClose:s,product:r,onAddToCart:n,isCheckoutBlocked:o})=>{const[a,l]=c.useState(r.is_price_by_weight?.5:1);ve.useEffect(()=>{t&&l(r.is_price_by_weight?.5:1)},[t,r.is_price_by_weight]);const i=h=>{l(f=>{const x=r.is_price_by_weight?.1:1,g=Math.max(x,f+h);return r.is_price_by_weight?parseFloat(g.toFixed(1)):Math.round(g)})},d=()=>{a<=0||(n(a,""),s())},u=r.price*a,m=h=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h);return e.jsx(Se,{open:t,onOpenChange:s,children:e.jsxs(Ne,{className:"sm:max-w-[425px] p-0",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:r.image_url||"/placeholder.svg",alt:r.name,className:"w-full h-48 object-cover"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs(Ce,{className:"p-0",children:[e.jsx(_e,{className:"text-2xl font-bold",children:r.name}),e.jsx(Pe,{className:"text-sm",children:r.description||"Sem descrição disponível."})]}),e.jsxs("div",{className:"flex items-center justify-between border-y py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-5 w-5 text-primary"}),e.jsxs("span",{className:"text-lg font-semibold",children:[m(r.price),r.is_price_by_weight&&e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:" / kg"})]})]}),e.jsxs("div",{className:"flex items-center border rounded-md h-10",children:[e.jsx(b,{variant:"ghost",size:"icon",className:"h-10 w-10",onClick:()=>i(r.is_price_by_weight?-.1:-1),disabled:a<=(r.is_price_by_weight?.1:1)||o,children:e.jsx(ae,{className:"h-5 w-5"})}),e.jsx(K,{type:r.is_price_by_weight?"number":"text",step:r.is_price_by_weight?"0.1":"1",value:r.is_price_by_weight?a.toFixed(1):a,onChange:h=>{const f=parseFloat(h.target.value);f>0&&l(f)},className:"w-16 h-10 text-center border-y-0 rounded-none p-0 focus-visible:ring-0",readOnly:!r.is_price_by_weight,disabled:o}),e.jsx(b,{variant:"ghost",size:"icon",className:"h-10 w-10",onClick:()=>i(r.is_price_by_weight?.1:1),disabled:o,children:e.jsx(G,{className:"h-5 w-5"})})]})]}),e.jsx(Ee,{className:"pt-4",children:e.jsxs(b,{type:"button",className:"w-full h-12 text-lg flex items-center justify-between px-6",onClick:d,disabled:a<=0||o,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Adicionar"]}),e.jsx("span",{className:"font-bold",children:m(u)})]})})]})]})})},_t=({isOpen:t,onClose:s,product:r,onAddToCart:n,isCheckoutBlocked:o})=>{const[a,l]=c.useState(0);ve.useEffect(()=>{t&&l(0)},[t]);const i=h=>{l(f=>{const x=Math.max(0,f+h);return parseFloat(x.toFixed(1))})},d=()=>{a<=0||(n(a,""),s())},u=r.price*a,m=h=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h);return e.jsx(Se,{open:t,onOpenChange:s,children:e.jsxs(Ne,{className:"sm:max-w-[425px]",children:[e.jsxs(Ce,{children:[e.jsxs(_e,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-primary"}),r.name," (Por Peso)"]}),e.jsxs(Pe,{children:["Informe a quantidade em quilogramas (kg). Preço: ",m(r.price),"/kg."]})]}),e.jsx("div",{className:"space-y-4 py-2",children:e.jsxs("div",{className:"flex items-center justify-between border-y py-3",children:[e.jsx("label",{className:"text-lg font-semibold",children:"Quantidade (kg)"}),e.jsxs("div",{className:"flex items-center border rounded-md h-10",children:[e.jsx(b,{variant:"ghost",size:"icon",className:"h-10 w-10",onClick:()=>i(-.1),disabled:a<=0||o,children:e.jsx(ae,{className:"h-5 w-5"})}),e.jsx(K,{type:"number",step:"0.1",value:a.toFixed(1),onChange:h=>{const f=parseFloat(h.target.value);f>=0&&l(parseFloat(f.toFixed(1)))},className:"w-16 h-10 text-center border-y-0 rounded-none p-0 focus-visible:ring-0",disabled:o}),e.jsx(b,{variant:"ghost",size:"icon",className:"h-10 w-10",onClick:()=>i(.1),disabled:o,children:e.jsx(G,{className:"h-5 w-5"})})]})]})}),e.jsx(Ee,{className:"pt-4",children:e.jsxs(b,{type:"button",className:"w-full h-12 text-lg flex items-center justify-between px-6",onClick:d,disabled:a<=0||o,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Adicionar ao Carrinho"]}),e.jsx("span",{className:"font-bold",children:m(u)})]})})]})})},Pt=({product:t,isCheckoutBlocked:s})=>{const{addItem:r}=Y(),[n,o]=c.useState(!1),[a,l]=c.useState(!1),i=(m=1,h="")=>{if(s){q.error("A loja está fechada.",{description:"Não é possível adicionar itens ao carrinho ou finalizar o pedido no momento."});return}r(t,m,h)},d=()=>{if(s){q.error("A loja está fechada.",{description:"Não é possível adicionar itens ao carrinho ou finalizar o pedido no momento."});return}t.is_price_by_weight?l(!0):i(1,"")},u=m=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m);return e.jsxs(e.Fragment,{children:[e.jsx(Ct,{isOpen:n,onClose:()=>o(!1),product:t,onAddToCart:i,isCheckoutBlocked:s}),e.jsx(_t,{isOpen:a,onClose:()=>l(!1),product:t,onAddToCart:i,isCheckoutBlocked:s}),e.jsxs(ne,{className:"overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300 flex flex-col",children:[e.jsxs("div",{className:"relative cursor-pointer",onClick:()=>o(!0),children:[e.jsx(Nt,{src:t.image_url||"/placeholder.svg",alt:t.name,className:"w-full h-48 object-cover"}),t.is_price_by_weight&&e.jsxs("div",{className:"absolute top-2 left-2 bg-primary text-primary-foreground text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(ze,{className:"h-3 w-3"})," Preço por Peso"]})]}),e.jsxs(it,{className:"p-4 flex-grow flex flex-col justify-between",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 truncate",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:t.description})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[e.jsxs("p",{className:"text-xl font-bold text-primary flex items-center gap-1",children:[e.jsx(Te,{className:"h-5 w-5"}),u(t.price),t.is_price_by_weight&&e.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/kg"})]}),e.jsx(b,{size:"icon",onClick:d,disabled:s,children:e.jsx(G,{className:"h-5 w-5"})})]})]})]})]})},Et=({totalItems:t,onClick:s,isCheckoutBlocked:r})=>e.jsxs(b,{onClick:s,size:"icon",className:y("rounded-full shadow-md transition-transform duration-300 flex-shrink-0",t>0?"scale-100":"scale-0 pointer-events-none"),"aria-label":`Ver carrinho com ${t} itens`,disabled:r,children:[e.jsx(I,{className:"h-6 w-6"}),t>0&&e.jsx("span",{className:"absolute top-0 right-0 transform translate-x-1/4 -translate-y-1/4 bg-destructive text-destructive-foreground text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:t})]}),Rt=ht,Tt=ut,Ie=c.forwardRef(({className:t,...s},r)=>e.jsx(Ae,{className:y("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));Ie.displayName=Ae.displayName;const At=ct("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),He=c.forwardRef(({side:t="right",className:s,children:r,...n},o)=>e.jsxs(Tt,{children:[e.jsx(Ie,{}),e.jsxs(Le,{ref:o,className:y(At({side:t}),s),...n,children:[r,e.jsxs(mt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));He.displayName=Le.displayName;const Lt=c.forwardRef(({className:t,...s},r)=>e.jsx(De,{ref:r,className:y("text-lg font-semibold text-foreground",t),...s}));Lt.displayName=De.displayName;const Dt=c.forwardRef(({className:t,...s},r)=>e.jsx(Me,{ref:r,className:y("text-sm text-muted-foreground",t),...s}));Dt.displayName=Me.displayName;function Mt(t,s){return c.useReducer((r,n)=>s[r][n]??r,t)}var le="ScrollArea",[Fe,Dr]=tt(le),[kt,S]=Fe(le),We=c.forwardRef((t,s)=>{const{__scopeScrollArea:r,type:n="hover",dir:o,scrollHideDelay:a=600,...l}=t,[i,d]=c.useState(null),[u,m]=c.useState(null),[h,f]=c.useState(null),[x,g]=c.useState(null),[E,W]=c.useState(null),[v,M]=c.useState(0),[B,T]=c.useState(0),[k,A]=c.useState(!1),[_,z]=c.useState(!1),p=F(s,N=>d(N)),w=dt(o);return e.jsx(kt,{scope:r,type:n,dir:w,scrollHideDelay:a,scrollArea:i,viewport:u,onViewportChange:m,content:h,onContentChange:f,scrollbarX:x,onScrollbarXChange:g,scrollbarXEnabled:k,onScrollbarXEnabledChange:A,scrollbarY:E,onScrollbarYChange:W,scrollbarYEnabled:_,onScrollbarYEnabledChange:z,onCornerWidthChange:M,onCornerHeightChange:T,children:e.jsx($.div,{dir:w,...l,ref:p,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":B+"px",...t.style}})})});We.displayName=le;var Be="ScrollAreaViewport",$e=c.forwardRef((t,s)=>{const{__scopeScrollArea:r,children:n,nonce:o,...a}=t,l=S(Be,r),i=c.useRef(null),d=F(s,i,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),e.jsx($.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});$e.displayName=Be;var C="ScrollAreaScrollbar",ie=c.forwardRef((t,s)=>{const{forceMount:r,...n}=t,o=S(C,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:l}=o,i=t.orientation==="horizontal";return c.useEffect(()=>(i?a(!0):l(!0),()=>{i?a(!1):l(!1)}),[i,a,l]),o.type==="hover"?e.jsx(zt,{...n,ref:s,forceMount:r}):o.type==="scroll"?e.jsx(Ot,{...n,ref:s,forceMount:r}):o.type==="auto"?e.jsx(qe,{...n,ref:s,forceMount:r}):o.type==="always"?e.jsx(ce,{...n,ref:s}):null});ie.displayName=C;var zt=c.forwardRef((t,s)=>{const{forceMount:r,...n}=t,o=S(C,t.__scopeScrollArea),[a,l]=c.useState(!1);return c.useEffect(()=>{const i=o.scrollArea;let d=0;if(i){const u=()=>{window.clearTimeout(d),l(!0)},m=()=>{d=window.setTimeout(()=>l(!1),o.scrollHideDelay)};return i.addEventListener("pointerenter",u),i.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),i.removeEventListener("pointerenter",u),i.removeEventListener("pointerleave",m)}}},[o.scrollArea,o.scrollHideDelay]),e.jsx(Q,{present:r||a,children:e.jsx(qe,{"data-state":a?"visible":"hidden",...n,ref:s})})}),Ot=c.forwardRef((t,s)=>{const{forceMount:r,...n}=t,o=S(C,t.__scopeScrollArea),a=t.orientation==="horizontal",l=J(()=>d("SCROLL_END"),100),[i,d]=Mt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return c.useEffect(()=>{if(i==="idle"){const u=window.setTimeout(()=>d("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(u)}},[i,o.scrollHideDelay,d]),c.useEffect(()=>{const u=o.viewport,m=a?"scrollLeft":"scrollTop";if(u){let h=u[m];const f=()=>{const x=u[m];h!==x&&(d("SCROLL"),l()),h=x};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[o.viewport,a,d,l]),e.jsx(Q,{present:r||i!=="hidden",children:e.jsx(ce,{"data-state":i==="hidden"?"hidden":"visible",...n,ref:s,onPointerEnter:D(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:D(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),qe=c.forwardRef((t,s)=>{const r=S(C,t.__scopeScrollArea),{forceMount:n,...o}=t,[a,l]=c.useState(!1),i=t.orientation==="horizontal",d=J(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,m=r.viewport.offsetHeight<r.viewport.scrollHeight;l(i?u:m)}},10);return H(r.viewport,d),H(r.content,d),e.jsx(Q,{present:n||a,children:e.jsx(ce,{"data-state":a?"visible":"hidden",...o,ref:s})})}),ce=c.forwardRef((t,s)=>{const{orientation:r="vertical",...n}=t,o=S(C,t.__scopeScrollArea),a=c.useRef(null),l=c.useRef(0),[i,d]=c.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Qe(i.viewport,i.content),m={...n,sizes:i,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:f=>l.current=f};function h(f,x){return $t(f,l.current,i,x)}return r==="horizontal"?e.jsx(It,{...m,ref:s,onThumbPositionChange:()=>{if(o.viewport&&a.current){const f=o.viewport.scrollLeft,x=be(f,i,o.dir);a.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollLeft=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollLeft=h(f,o.dir))}}):r==="vertical"?e.jsx(Ht,{...m,ref:s,onThumbPositionChange:()=>{if(o.viewport&&a.current){const f=o.viewport.scrollTop,x=be(f,i);a.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollTop=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollTop=h(f))}}):null}),It=c.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...o}=t,a=S(C,t.__scopeScrollArea),[l,i]=c.useState(),d=c.useRef(null),u=F(s,d,a.onScrollbarXChange);return c.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),e.jsx(Ve,{"data-orientation":"horizontal",...o,ref:u,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Z(r)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.x),onDragScroll:m=>t.onDragScroll(m.x),onWheelScroll:(m,h)=>{if(a.viewport){const f=a.viewport.scrollLeft+m.deltaX;t.onWheelScroll(f),Ge(f,h)&&m.preventDefault()}},onResize:()=>{d.current&&a.viewport&&l&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:V(l.paddingLeft),paddingEnd:V(l.paddingRight)}})}})}),Ht=c.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...o}=t,a=S(C,t.__scopeScrollArea),[l,i]=c.useState(),d=c.useRef(null),u=F(s,d,a.onScrollbarYChange);return c.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),e.jsx(Ve,{"data-orientation":"vertical",...o,ref:u,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Z(r)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.y),onDragScroll:m=>t.onDragScroll(m.y),onWheelScroll:(m,h)=>{if(a.viewport){const f=a.viewport.scrollTop+m.deltaY;t.onWheelScroll(f),Ge(f,h)&&m.preventDefault()}},onResize:()=>{d.current&&a.viewport&&l&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:V(l.paddingTop),paddingEnd:V(l.paddingBottom)}})}})}),[Ft,Xe]=Fe(C),Ve=c.forwardRef((t,s)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:o,onThumbChange:a,onThumbPointerUp:l,onThumbPointerDown:i,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:m,onResize:h,...f}=t,x=S(C,r),[g,E]=c.useState(null),W=F(s,p=>E(p)),v=c.useRef(null),M=c.useRef(""),B=x.viewport,T=n.content-n.viewport,k=L(m),A=L(d),_=J(h,10);function z(p){if(v.current){const w=p.clientX-v.current.left,N=p.clientY-v.current.top;u({x:w,y:N})}}return c.useEffect(()=>{const p=w=>{const N=w.target;(g==null?void 0:g.contains(N))&&k(w,T)};return document.addEventListener("wheel",p,{passive:!1}),()=>document.removeEventListener("wheel",p,{passive:!1})},[B,g,T,k]),c.useEffect(A,[n,A]),H(g,_),H(x.content,_),e.jsx(Ft,{scope:r,scrollbar:g,hasThumb:o,onThumbChange:L(a),onThumbPointerUp:L(l),onThumbPositionChange:A,onThumbPointerDown:L(i),children:e.jsx($.div,{...f,ref:W,style:{position:"absolute",...f.style},onPointerDown:D(t.onPointerDown,p=>{p.button===0&&(p.target.setPointerCapture(p.pointerId),v.current=g.getBoundingClientRect(),M.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),z(p))}),onPointerMove:D(t.onPointerMove,z),onPointerUp:D(t.onPointerUp,p=>{const w=p.target;w.hasPointerCapture(p.pointerId)&&w.releasePointerCapture(p.pointerId),document.body.style.webkitUserSelect=M.current,x.viewport&&(x.viewport.style.scrollBehavior=""),v.current=null})})})}),X="ScrollAreaThumb",Ue=c.forwardRef((t,s)=>{const{forceMount:r,...n}=t,o=Xe(X,t.__scopeScrollArea);return e.jsx(Q,{present:r||o.hasThumb,children:e.jsx(Wt,{ref:s,...n})})}),Wt=c.forwardRef((t,s)=>{const{__scopeScrollArea:r,style:n,...o}=t,a=S(X,r),l=Xe(X,r),{onThumbPositionChange:i}=l,d=F(s,h=>l.onThumbChange(h)),u=c.useRef(void 0),m=J(()=>{u.current&&(u.current(),u.current=void 0)},100);return c.useEffect(()=>{const h=a.viewport;if(h){const f=()=>{if(m(),!u.current){const x=qt(h,i);u.current=x,i()}};return i(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,m,i]),e.jsx($.div,{"data-state":l.hasThumb?"visible":"hidden",...o,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:D(t.onPointerDownCapture,h=>{const x=h.target.getBoundingClientRect(),g=h.clientX-x.left,E=h.clientY-x.top;l.onThumbPointerDown({x:g,y:E})}),onPointerUp:D(t.onPointerUp,l.onThumbPointerUp)})});Ue.displayName=X;var de="ScrollAreaCorner",Ye=c.forwardRef((t,s)=>{const r=S(de,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?e.jsx(Bt,{...t,ref:s}):null});Ye.displayName=de;var Bt=c.forwardRef((t,s)=>{const{__scopeScrollArea:r,...n}=t,o=S(de,r),[a,l]=c.useState(0),[i,d]=c.useState(0),u=!!(a&&i);return H(o.scrollbarX,()=>{var h;const m=((h=o.scrollbarX)==null?void 0:h.offsetHeight)||0;o.onCornerHeightChange(m),d(m)}),H(o.scrollbarY,()=>{var h;const m=((h=o.scrollbarY)==null?void 0:h.offsetWidth)||0;o.onCornerWidthChange(m),l(m)}),u?e.jsx($.div,{...n,ref:s,style:{width:a,height:i,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function V(t){return t?parseInt(t,10):0}function Qe(t,s){const r=t/s;return isNaN(r)?0:r}function Z(t){const s=Qe(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*s;return Math.max(n,18)}function $t(t,s,r,n="ltr"){const o=Z(r),a=o/2,l=s||a,i=o-l,d=r.scrollbar.paddingStart+l,u=r.scrollbar.size-r.scrollbar.paddingEnd-i,m=r.content-r.viewport,h=n==="ltr"?[0,m]:[m*-1,0];return Ke([d,u],h)(t)}function be(t,s,r="ltr"){const n=Z(s),o=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,a=s.scrollbar.size-o,l=s.content-s.viewport,i=a-n,d=r==="ltr"?[0,l]:[l*-1,0],u=ft(t,d);return Ke([0,l],[0,i])(u)}function Ke(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(r-t[0])}}function Ge(t,s){return t>0&&t<s}var qt=(t,s=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function o(){const a={left:t.scrollLeft,top:t.scrollTop},l=r.left!==a.left,i=r.top!==a.top;(l||i)&&s(),r=a,n=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(n)};function J(t,s){const r=L(t),n=c.useRef(0);return c.useEffect(()=>()=>window.clearTimeout(n.current),[]),c.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,s)},[r,s])}function H(t,s){const r=L(s);rt(()=>{let n=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return o.observe(t),()=>{window.cancelAnimationFrame(n),o.unobserve(t)}}},[t,r])}var Ze=We,Xt=$e,Vt=Ye;const me=c.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(Ze,{ref:n,className:y("relative overflow-hidden",t),...r,children:[e.jsx(Xt,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(ue,{}),e.jsx(Vt,{})]}));me.displayName=Ze.displayName;const ue=c.forwardRef(({className:t,orientation:s="vertical",...r},n)=>e.jsx(ie,{ref:n,orientation:s,className:y("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(Ue,{className:"relative flex-1 rounded-full bg-border"})}));ue.displayName=ie.displayName;const Ut=({item:t})=>{const{removeItem:s,updateItemQuantity:r}=Y(),{product:n,quantity:o,subtotal:a,notes:l}=t,i=u=>{r(n.id,u)},d=u=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u);return e.jsxs("div",{className:"flex items-start gap-3 border-b pb-3",children:[e.jsx("img",{src:n.image_url||"/placeholder.svg",alt:n.name,className:"w-16 h-16 object-cover rounded-md flex-shrink-0"}),e.jsxs("div",{className:"flex-grow space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-medium text-sm pr-2",children:n.name}),e.jsx(b,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:()=>s(n.id),children:e.jsx(Re,{className:"h-3 w-3"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n.is_price_by_weight?`${o} kg`:`${o} x ${d(n.price)}`}),l&&e.jsxs("p",{className:"text-xs text-muted-foreground italic max-w-full truncate",children:["Obs: ",l]}),e.jsxs("div",{className:"flex items-center justify-between pt-1",children:[e.jsxs("div",{className:"flex items-center border rounded-md h-8",children:[e.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>i(o-1),disabled:o<=(n.is_price_by_weight?.1:1),children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(K,{type:n.is_price_by_weight?"number":"text",step:n.is_price_by_weight?"0.1":"1",value:n.is_price_by_weight?o.toFixed(1):o,onChange:u=>{const m=parseFloat(u.target.value);m>0&&i(m)},className:"w-12 h-8 text-center border-y-0 rounded-none p-0 focus-visible:ring-0",readOnly:!n.is_price_by_weight}),e.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>i(o+(n.is_price_by_weight?.1:1)),children:e.jsx(G,{className:"h-4 w-4"})})]}),e.jsx("span",{className:"font-bold text-base",children:d(a)})]})]})]})},Yt=({totalAmount:t,totalItems:s,isCheckoutBlocked:r,restaurantId:n})=>s===0?null:e.jsxs("div",{className:y("fixed bottom-0 left-0 right-0 bg-card border-t shadow-2xl p-4 z-50","lg:hidden"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Total do Pedido (",s," itens):"]}),e.jsx("span",{className:"text-xl font-bold text-foreground",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)})]}),e.jsx(je,{to:`/pre-checkout?restaurantId=${n}`,children:e.jsxs(b,{className:"w-full h-12 text-lg",disabled:r||!n,children:["Finalizar Pedido ",e.jsx(ke,{className:"ml-2 h-5 w-5"})]})})]}),we=({isOpen:t=!0,onClose:s,isCheckoutBlocked:r=!1,restaurantId:n})=>{const{items:o,totalAmount:a,totalItems:l}=Y(),i=e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(I,{className:"h-5 w-5 text-primary"}),"Seu Pedido (",l,")"]})}),o.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center flex-grow p-8 text-center",children:[e.jsx(I,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"Seu carrinho está vazio"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Adicione alguns itens deliciosos!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"flex-grow p-4",children:e.jsx("div",{className:"space-y-4",children:o.map(d=>e.jsx(Ut,{item:d},d.product.id))})}),e.jsxs("div",{className:"p-4 border-t space-y-3",children:[e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)})]}),e.jsx(je,{to:`/pre-checkout?restaurantId=${n}`,onClick:s,children:e.jsxs(b,{className:"w-full h-12 text-lg",disabled:r||!n,children:["Finalizar Pedido ",e.jsx(ke,{className:"ml-2 h-5 w-5"})]})})]})]})]});return t===!0&&!s?e.jsx(ne,{className:"shadow-lg h-[calc(100vh-5rem)] flex flex-col",children:i}):e.jsx(Rt,{open:t,onOpenChange:s,children:e.jsxs(He,{side:"right",className:"w-full sm:max-w-sm p-0",children:[i,t&&l>0&&e.jsx(Yt,{totalAmount:a,totalItems:l,isCheckoutBlocked:r,restaurantId:n})]})})},Qt=(t=1024)=>{const[s,r]=c.useState(!1);return c.useEffect(()=>{const n=()=>{r(window.innerWidth<t)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[t]),s},Kt=t=>{const s=Je(),[r,n]=c.useState([]),[o,a]=c.useState(!0),[l,i]=c.useState(!1),d=async u=>{const{data:m,error:h}=await R.from("business_hours").select("*").eq("restaurant_id",u).order("day_of_week",{ascending:!0});return h?(console.error("Error fetching initial business hours:",h),i(!0),[]):m};return c.useEffect(()=>{if(!t){a(!1);return}let u=!0;d(t).then(h=>{u&&(n(h),a(!1))});const m=R.channel(`business_hours_changes_${t}`).on("postgres_changes",{event:"*",schema:"public",table:"business_hours",filter:`restaurant_id=eq.${t}`},h=>{console.log("[Realtime] Business Hours change detected:",h.eventType),s.invalidateQueries({queryKey:["businessHours",t]}),d(t).then(f=>{u&&n(f)})}).subscribe(h=>{h==="SUBSCRIBED"&&console.log(`[Realtime] Subscribed to business_hours for ${t}`)});return()=>{u=!1,R.removeChannel(m)}},[t,s]),{hours:r,isLoading:o,isError:l}},Gt=({categories:t})=>{const[s,r]=c.useState(null),n=c.useCallback(o=>{const a=document.getElementById(`category-${o}`);a&&(a.scrollIntoView({behavior:"smooth",block:"start"}),r(o))},[]);return c.useEffect(()=>{const o=new IntersectionObserver(a=>{a.forEach(l=>{if(l.isIntersecting){const i=l.target.id.replace("category-","");r(i)}})},{rootMargin:"-200px 0px -50% 0px",threshold:0});return t.forEach(a=>{const l=document.getElementById(`category-${a.id}`);l&&o.observe(l)}),()=>{t.forEach(a=>{const l=document.getElementById(`category-${a.id}`);l&&o.unobserve(l)})}},[t]),e.jsx("div",{className:"w-full border-t shadow-md",children:e.jsxs(me,{className:"w-full whitespace-nowrap",children:[e.jsx("div",{className:"flex space-x-2 p-3 container mx-auto px-4",children:t.map(o=>e.jsx(b,{variant:s===o.id?"default":"outline",onClick:()=>n(o.id),className:y("flex-shrink-0",s===o.id?"bg-primary text-primary-foreground":"bg-muted hover:bg-accent/50"),children:o.name},o.id))}),e.jsx(ue,{orientation:"horizontal"})]})})},Zt=async t=>{var i;const{data:s,error:r}=await R.from("restaurants").select("*").eq("id",t).eq("is_active",!0).limit(1).single();if(r&&r.code!=="PGRST116")throw new Error(`Erro ao buscar restaurante: ${r.message}`);if(!s)throw new Error("Restaurante não encontrado ou inativo.");const[n,o]=await Promise.all([R.from("categories").select("*").eq("restaurant_id",s.id).eq("is_active",!0).order("display_order",{ascending:!0}),R.from("products").select("*").eq("restaurant_id",s.id)]);if(n.error)throw new Error(`Erro ao buscar categorias: ${n.error.message}`);if(o.error)throw new Error(`Erro ao buscar produtos: ${o.error.message}`);const a=new Map;(i=o.data)==null||i.forEach(d=>{if(d.category_id){const u=a.get(d.category_id)||[];u.push(d),a.set(d.category_id,u)}});const l=n.data.map(d=>({...d,products:a.get(d.id)||[]})).filter(d=>d.products.length>0);return{restaurant:s,categories:l}},Jt=async t=>{const{data:s,error:r}=await R.from("customers").select("*").eq("user_id",t).limit(1).single();if(r&&r.code!=="PGRST116")throw new Error(r.message);return s||null},Mr=()=>{const{restaurantId:t}=et(),s=Qt(),{totalItems:r,items:n,clearCart:o}=Y(),[a,l]=c.useState(!1),{data:i}=xt(),[d,u]=c.useState(!1),[m,h]=c.useState(""),{data:f,isLoading:x,isError:g,error:E,refetch:W}=fe({queryKey:["menuData",t],queryFn:()=>Zt(t),enabled:!!t,staleTime:1e3*60*5}),{hours:v,isLoading:M}=Kt(t),{data:B}=fe({queryKey:["menuCustomerData",i==null?void 0:i.id],queryFn:()=>Jt(i.id),enabled:!!i,staleTime:0});c.useEffect(()=>{if(t&&n.length>0){const j=n[0].product.restaurant_id;j&&j!==t&&(o(!0),q.info("Novo Restaurante Detectado",{description:"Seu carrinho anterior foi limpo para iniciar um novo pedido nesta loja.",duration:5e3}))}},[t,n,o]);const{isOpen:T,todayHours:k}=c.useMemo(()=>v&&v.length>0?Oe(v):{isOpen:!0,todayHours:"Horário não configurado"},[v]),A=c.useMemo(()=>{const j=(f==null?void 0:f.categories)||[],O=m.toLowerCase().trim();return O?j.map(P=>{const ee=P.products.filter(te=>{var he;return te.is_available&&(te.name.toLowerCase().includes(O)||((he=te.description)==null?void 0:he.toLowerCase().includes(O)))});return{...P,products:ee}}).filter(P=>P.products.length>0):j.map(P=>({...P,products:P.products.filter(ee=>ee.is_available)})).filter(P=>P.products.length>0)},[f==null?void 0:f.categories,m]),_=!T,z=async()=>{await R.auth.signOut(),q.success("Você saiu da sua conta."),window.location.reload()};if(!t)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(re,{variant:"destructive",className:"max-w-lg",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx(se,{children:"Erro de Acesso"}),e.jsx(oe,{children:"O link do cardápio está incompleto. Por favor, use o link fornecido no painel de administração."})]})});if(x||M)return e.jsx(st,{});if(g||!f)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsx(ne,{className:"max-w-lg w-full text-center",children:e.jsxs(re,{variant:"destructive",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx(se,{children:"Erro ao carregar cardápio"}),e.jsx(oe,{children:E instanceof Error?E.message:"Ocorreu um erro desconhecido ao buscar os dados do restaurante."}),e.jsxs(b,{onClick:()=>W(),className:"mt-3",variant:"secondary",size:"sm",children:[e.jsx(lt,{className:"h-4 w-4 mr-2"})," Tentar Novamente"]})]})})});const p=f.restaurant,w=A,N=m.length>0;return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(pt,{isOpen:d,onClose:()=>u(!1),customer:B}),e.jsx("header",{className:"border-b bg-card sticky top-0 z-30 shadow-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:p.name}),p.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:p.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsxs(e.Fragment,{children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>u(!0),"aria-label":"Meu Perfil e Pedidos",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"})," Perfil / Pedidos"]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:z,children:[e.jsx(gt,{className:"h-4 w-4 mr-2"})," Sair"]})]}),s&&r>0&&e.jsx(Et,{onClick:()=>l(!0),totalItems:r,isCheckoutBlocked:_})]})]}),e.jsxs("div",{className:"mt-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsx(yt,{restaurant:p,hours:v}),p.phone&&e.jsxs("a",{href:`tel:${p.phone.replace(/\D/g,"")}`,className:"flex items-center text-sm font-medium text-primary hover:text-primary/80 transition-colors",children:[e.jsx(wt,{className:"h-4 w-4 mr-1"}),p.phone]})]}),e.jsxs("div",{className:"relative mt-4 mb-4",children:[" ",e.jsx(xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(K,{placeholder:"Buscar produto...",className:"pl-10 h-10",value:m,onChange:j=>h(j.target.value)})]}),!N&&w.length>1&&e.jsx(Gt,{categories:w})]})}),e.jsxs("main",{className:"flex-1 container mx-auto px-4 py-8 flex",children:[e.jsxs("div",{className:"flex-1 w-full lg:max-w-3xl xl:max-w-4xl",children:[!T&&e.jsx(St,{todayHours:k}),N&&w.length===0&&e.jsxs("div",{className:"text-center py-12 bg-card rounded-lg border",children:[e.jsx(xe,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"Nenhum produto encontrado."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tente um termo de pesquisa diferente."})]}),e.jsx("div",{className:"space-y-10",children:w.map(j=>e.jsxs("section",{id:`category-${j.id}`,className:y("scroll-mt-[200px]",N&&"pt-0"),children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 border-b pb-2",children:N?"Resultados da Pesquisa":j.name}),e.jsx("div",{className:"grid gap-6 grid-cols-2 lg:grid-cols-3",children:j.products.map(O=>e.jsx(Pt,{product:O,isCheckoutBlocked:_},O.id))})]},j.id))})]}),e.jsx("div",{className:"hidden lg:block lg:w-96 lg:ml-8 flex-shrink-0 sticky top-20 self-start",children:e.jsx(we,{isCheckoutBlocked:_,restaurantId:t})})]}),s&&e.jsx(we,{isOpen:a,onClose:()=>l(!1),isCheckoutBlocked:_,restaurantId:t})]})};export{Mr as default};
