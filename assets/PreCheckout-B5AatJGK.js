import{j as o,u as f}from"./tanstack-C7aOFagJ.js";import{h as m,k as p,r as l}from"./vendor-DjsPZZVP.js";import{aw as h,d as i,s as I}from"./index-DZmFWvxX.js";import{u as g}from"./use-active-restaurant-id-C31TDz6e.js";import"./supabase-BAEEEeUB.js";const x=()=>f({queryKey:["authStatus"],queryFn:async()=>{const{data:{session:t}}=await I.auth.getSession();return(t==null?void 0:t.user)||null},staleTime:1/0}),k=()=>{const t=m(),[c]=p(),a=c.get("restaurantId"),{data:n,isLoading:s}=x(),{data:d,isLoading:e}=g(),{totalItems:r}=h(),u=a||d;return l.useEffect(()=>{if(r===0){u?t(`/menu/${u}`,{replace:!0}):e||t("/",{replace:!0});return}!s&&!e&&(n?t("/checkout",{state:{restaurantId:a},replace:!0}):t("/auth",{state:{from:"/checkout",restaurantId:a},replace:!0}))},[r,n,s,e,t,u,a]),s||e||r===0?o.jsx(i,{}):o.jsx(i,{})};export{k as default};
