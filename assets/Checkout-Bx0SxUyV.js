import{c as me,f as pe,r as u,o as ee,j as e,P as V,i as W,k as De,z as Oe,g as Me,d as Z,y as he,u as Ve,e as Ze,b as Ke,a as $,L as Ue,x as te}from"./index-zkuE9Bm6.js";import{u as He}from"./useQuery-Bop5DQT3.js";import{u as Je}from"./useMutation-DTwKCpeC.js";import{o as Qe,s as R,l as Xe,e as We,p as Ye,c as er,Z as F,u as rr,t as sr}from"./types-BjVHfDxe.js";import{s as k}from"./client-g0uDe16g.js";import{B as X}from"./button-3xZnEy7f.js";import{C as L,b as G,c as D,a as O}from"./card-B1F0wEox.js";import{I}from"./label-CD9lqJez.js";import{c as xe,u as ar,R as or,I as nr}from"./index-CIr-YXcb.js";import{u as tr}from"./index-CSKTzlwz.js";import{S as ie}from"./separator-DaMM4xLR.js";import{T as ir}from"./textarea-DhevHx2f.js";import{A as ce,T as cr,a as le,b as de}from"./alert-B4s-E96m.js";import{S as z}from"./skeleton-CBZEqJVS.js";import{F as lr,b as y,c as f,a as g,e as v,d as T}from"./form-gGgYvqwv.js";import{Z as dr}from"./ZipCodeInput-DApDzusw.js";import{A as ur}from"./arrow-left-BDosrADm.js";import{T as ue}from"./truck-Dx6yc9rA.js";import{S as fe,a as mr}from"./store-BJpMroAj.js";import{C as je}from"./credit-card-CwfrA48D.js";import{P as pr}from"./package-BjiMSLe_.js";import{D as hr}from"./dollar-sign-MxpQT_7w.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=me("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=me("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var re="Radio",[jr,ge]=pe(re),[gr,yr]=jr(re),ye=u.forwardRef((a,r)=>{const{__scopeRadio:n,name:t,checked:o=!1,required:c,disabled:i,value:p="on",onCheck:x,form:m,...N}=a,[l,C]=u.useState(null),h=ee(r,b=>C(b)),j=u.useRef(!1),_=l?m||!!l.closest("form"):!0;return e.jsxs(gr,{scope:n,checked:o,disabled:i,children:[e.jsx(V.button,{type:"button",role:"radio","aria-checked":o,"data-state":we(o),"data-disabled":i?"":void 0,disabled:i,value:p,...N,ref:h,onClick:W(a.onClick,b=>{o||x==null||x(),_&&(j.current=b.isPropagationStopped(),j.current||b.stopPropagation())})}),_&&e.jsx(be,{control:l,bubbles:!j.current,name:t,value:p,checked:o,required:c,disabled:i,form:m,style:{transform:"translateX(-100%)"}})]})});ye.displayName=re;var ve="RadioIndicator",Ne=u.forwardRef((a,r)=>{const{__scopeRadio:n,forceMount:t,...o}=a,c=yr(ve,n);return e.jsx(De,{present:t||c.checked,children:e.jsx(V.span,{"data-state":we(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:r})})});Ne.displayName=ve;var vr="RadioBubbleInput",be=u.forwardRef(({__scopeRadio:a,control:r,checked:n,bubbles:t=!0,...o},c)=>{const i=u.useRef(null),p=ee(i,c),x=tr(n),m=Oe(r);return u.useEffect(()=>{const N=i.current;if(!N)return;const l=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(l,"checked").set;if(x!==n&&h){const j=new Event("click",{bubbles:t});h.call(N,n),N.dispatchEvent(j)}},[x,n,t]),e.jsx(V.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:p,style:{...o.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});be.displayName=vr;function we(a){return a?"checked":"unchecked"}var Nr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],K="RadioGroup",[br,as]=pe(K,[xe,ge]),Re=xe(),Ce=ge(),[wr,Rr]=br(K),_e=u.forwardRef((a,r)=>{const{__scopeRadioGroup:n,name:t,defaultValue:o,value:c,required:i=!1,disabled:p=!1,orientation:x,dir:m,loop:N=!0,onValueChange:l,...C}=a,h=Re(n),j=ar(m),[_,b]=Me({prop:c,defaultProp:o??null,onChange:l,caller:K});return e.jsx(wr,{scope:n,name:t,required:i,disabled:p,value:_,onValueChange:b,children:e.jsx(or,{asChild:!0,...h,orientation:x,dir:j,loop:N,children:e.jsx(V.div,{role:"radiogroup","aria-required":i,"aria-orientation":x,"data-disabled":p?"":void 0,dir:j,...C,ref:r})})})});_e.displayName=K;var Ee="RadioGroupItem",Pe=u.forwardRef((a,r)=>{const{__scopeRadioGroup:n,disabled:t,...o}=a,c=Rr(Ee,n),i=c.disabled||t,p=Re(n),x=Ce(n),m=u.useRef(null),N=ee(r,m),l=c.value===o.value,C=u.useRef(!1);return u.useEffect(()=>{const h=_=>{Nr.includes(_.key)&&(C.current=!0)},j=()=>C.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",j),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",j)}},[]),e.jsx(nr,{asChild:!0,...p,focusable:!i,active:l,children:e.jsx(ye,{disabled:i,required:c.required,checked:l,...x,...o,name:c.name,ref:N,onCheck:()=>c.onValueChange(o.value),onKeyDown:W(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:W(o.onFocus,()=>{var h;C.current&&((h=m.current)==null||h.click())})})})});Pe.displayName=Ee;var Cr="RadioGroupIndicator",Ie=u.forwardRef((a,r)=>{const{__scopeRadioGroup:n,...t}=a,o=Ce(n);return e.jsx(Ne,{...o,...t,ref:r})});Ie.displayName=Cr;var ke=_e,Se=Pe,_r=Ie;const Y=u.forwardRef(({className:a,...r},n)=>e.jsx(ke,{className:Z("grid gap-2",a),...r,ref:n}));Y.displayName=ke.displayName;const M=u.forwardRef(({className:a,...r},n)=>e.jsx(Se,{ref:n,className:Z("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:e.jsx(_r,{className:"flex items-center justify-center",children:e.jsx(xr,{className:"h-2.5 w-2.5 fill-current text-current"})})}));M.displayName=Se.displayName;const Er=a=>{let r=a.replace(/\D/g,"");return r.length>11&&(r=r.slice(0,11)),r.length>0&&(r=`(${r}`),r.length>3&&(r=`${r.slice(0,3)}) ${r.slice(3)}`),r.length>10&&(r=`${r.slice(0,10)}-${r.slice(10)}`),r},$e=he.forwardRef(({className:a,value:r,onChange:n,...t},o)=>{const c=i=>{const p=i.target.value,x=Er(p),m={...i,target:{...i.target,value:x}};n(m)};return e.jsx(I,{ref:o,type:"tel",className:Z("w-full",a),placeholder:"(99) 99999-9999",value:r,onChange:c,...t})});$e.displayName="PhoneInput";const Pr=a=>{let r=a.replace(/\D/g,"");return r.length>14&&(r=r.slice(0,14)),r.length<=11?(r.length>9&&(r=`${r.slice(0,9)}-${r.slice(9)}`),r.length>6&&(r=`${r.slice(0,6)}.${r.slice(6)}`),r.length>3&&(r=`${r.slice(0,3)}.${r.slice(3)}`),r):(r.length>12&&(r=`${r.slice(0,12)}-${r.slice(12)}`),r.length>8&&(r=`${r.slice(0,8)}/${r.slice(8)}`),r.length>5&&(r=`${r.slice(0,5)}.${r.slice(5)}`),r.length>2&&(r=`${r.slice(0,2)}.${r.slice(2)}`),r)},Fe=he.forwardRef(({className:a,value:r,onChange:n,...t},o)=>{const c=i=>{const p=i.target.value,x=Pr(p),m={...i,target:{...i.target,value:x}};n(m)};return e.jsx(I,{ref:o,type:"tel",className:Z("w-full",a),placeholder:"CPF ou CNPJ",value:r,onChange:c,maxLength:18,...t})});Fe.displayName="CpfCnpjInput";const Te=a=>a.replace(/\D/g,""),Ir=a=>a.replace(/\D/g,""),kr=a=>a.replace(/\D/g,""),Sr=Qe({name:R().min(1,"Nome é obrigatório."),phone:R().min(1,"Telefone é obrigatório.").transform(Te).refine(a=>a.length>=10,{message:"O telefone deve ter pelo menos 10 dígitos (incluindo DDD)."}),email:R().email("Email inválido.").optional().or(Xe("")),delivery_option:We(["delivery","pickup"],{required_error:"Selecione uma opção de entrega."}),street:R().optional().default(""),number:R().optional().default(""),neighborhood:R().optional().default(""),city:R().optional().default(""),zip_code:R().optional().default("").transform(Ir).refine(a=>a.length===8||a.length===0,{message:"CEP inválido. Deve conter 8 dígitos."}),payment_method_id:R().min(1,"Selecione uma forma de pagamento."),notes:R().optional(),cpf_cnpj:R().optional().default("").transform(kr).refine(a=>a.length===0||a.length===11||a.length===14,{message:"CPF deve ter 11 dígitos ou CNPJ 14 dígitos."}),change_for:Ye(a=>String(a).replace(",","."),er.number().optional().nullable())}).superRefine((a,r)=>{a.delivery_option==="delivery"&&(a.street.trim()===""&&r.addIssue({code:F.custom,message:"Rua é obrigatória.",path:["street"]}),a.number.trim()===""&&r.addIssue({code:F.custom,message:"Número é obrigatório.",path:["number"]}),a.neighborhood.trim()===""&&r.addIssue({code:F.custom,message:"Bairro é obrigatório.",path:["neighborhood"]}),a.city.trim()===""&&r.addIssue({code:F.custom,message:"Cidade é obrigatória.",path:["city"]}),a.zip_code.length!==8&&r.addIssue({code:F.custom,message:"CEP é obrigatório e deve ter 8 dígitos.",path:["zip_code"]}))}),$r=async()=>{const{data:a,error:r}=await k.from("restaurants").select("id, name, address, phone, email, street, number, neighborhood, city, zip_code, latitude, longitude").eq("is_active",!0).limit(1).single();if(r)throw new Error(`Erro ao buscar restaurante: ${r.message}`);if(!a)throw new Error("Nenhum restaurante ativo encontrado.");const n=a.id,[t,o]=await Promise.all([k.from("payment_methods").select("*").eq("restaurant_id",n).eq("is_active",!0).order("name",{ascending:!0}),k.from("delivery_zones").select("*").eq("restaurant_id",n).eq("is_active",!0).order("minimum_order",{ascending:!0})]);if(t.error)throw new Error(`Erro ao buscar métodos de pagamento: ${t.error.message}`);if(o.error)throw new Error(`Erro ao buscar zonas de entrega: ${o.error.message}`);return{restaurant:a,paymentMethods:t.data,deliveryZones:o.data}},Fr=a=>{switch(a){case"DollarSign":return hr;case"Smartphone":return mr;case"CreditCard":return je;case"Package":return pr;default:return fe}},Tr=({subtotal:a,deliveryFee:r,total:n,items:t})=>e.jsxs(L,{className:"sticky top-4",children:[e.jsx(G,{children:e.jsx(D,{className:"text-xl",children:"Seu Pedido"})}),e.jsxs(O,{className:"space-y-3",children:[e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(o=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[o.quantity,"x ",o.name,o.notes&&e.jsxs("span",{className:"block text-xs italic",children:["(",o.notes,")"]})]}),e.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o.price*o.quantity)})]},o.id))}),e.jsx(ie,{}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Taxa de Entrega:"}),e.jsx("span",{className:"font-medium text-primary",children:r>0?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r):"Grátis"})]})]}),e.jsx(ie,{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{className:"text-primary",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n)})]})]})]}),os=()=>{const a=Ve(),r=Ze(),n=Ke(),{items:t,subtotal:o,deliveryFee:c,total:i,setDeliveryFee:p,clearCart:x}=n,[m,N]=u.useState(!1),{data:l,isLoading:C,isError:h,error:j}=He({queryKey:["checkoutInitialData"],queryFn:$r}),_=l==null?void 0:l.restaurant,b=(l==null?void 0:l.paymentMethods)||[],U=(l==null?void 0:l.deliveryZones)||[],d=rr({resolver:sr(Sr),defaultValues:{name:"",phone:"",email:"",delivery_option:"delivery",street:"",number:"",neighborhood:"",city:"",zip_code:"",payment_method_id:"",notes:"",cpf_cnpj:"",change_for:null},mode:"onBlur"}),H=d.watch("delivery_option"),J=d.watch("payment_method_id"),P=b.find(s=>s.id===J),A=(P==null?void 0:P.name)==="Pagamento Online"||(P==null?void 0:P.name)==="PIX",Ae=(P==null?void 0:P.name)==="Dinheiro";u.useEffect(()=>{if(t.length===0&&!m){const s=setTimeout(()=>{$.info("Seu carrinho está vazio. Adicione itens para continuar."),a("/menu")},0);return()=>clearTimeout(s)}},[t.length,a,m]),u.useEffect(()=>{b.length>0&&!J&&d.setValue("payment_method_id",b[0].id)},[b,J,d]),u.useEffect(()=>{if(H==="delivery"){const s=U.length>0?U[0].delivery_fee:5;p(s)}else p(0)},[H,U,p]);const se=Je({mutationFn:async s=>{if(!_)throw new Error("Dados do restaurante indisponíveis.");let w;const q=Te(s.phone),{data:ae}=await k.from("customers").select("id").eq("phone",q).limit(1).single();if(ae)w=ae.id;else{const{data:E,error:S}=await k.from("customers").insert({name:s.name,phone:q,email:s.email||null,address:s.delivery_option==="delivery"?`${s.street}, ${s.number}, ${s.neighborhood}, ${s.city} - ${s.zip_code}`:null}).select("id").single();if(S)throw new Error(`Erro ao criar cliente: ${S.message}`);w=E.id}const ze=A?"pending_payment":"pending",{data:Le,error:oe}=await k.from("orders").insert({restaurant_id:_.id,customer_id:w,status:ze,total_amount:i,delivery_fee:c,notes:s.notes,delivery_address:s.delivery_option==="delivery"?`${s.street}, ${s.number}, ${s.neighborhood}, ${s.city} - ${s.zip_code}`:"Retirada no Local"}).select("id").single();if(oe)throw new Error(`Erro ao criar pedido: ${oe.message}`);const Q=Le.id,Ge=t.map(E=>({order_id:Q,product_id:E.product_id,quantity:E.quantity,unit_price:E.price,subtotal:E.price*E.quantity,notes:E.notes})),{error:ne}=await k.from("order_items").insert(Ge);if(ne)throw new Error(`Erro ao adicionar itens do pedido: ${ne.message}`);if(A){N(!0),$.info("Redirecionando para o pagamento...");const{data:E,error:S}=await k.functions.invoke("create-payment-preference",{body:{orderId:Q,items:t,totalAmount:i,restaurantName:_.name}});if(S)throw new Error(S.message);window.location.href=E.init_point}return Q},onSuccess:s=>{A||($.success(`Pedido #${s.slice(-4)} realizado com sucesso!`),r.invalidateQueries({queryKey:["orders"]}),a(`/order-success/${s}`))},onError:s=>{$.error(`Erro ao finalizar pedido: ${s.message}`),N(!1)}}),Be=s=>se.mutate(s),qe=s=>{Object.keys(s).length>0&&$.error("Por favor, preencha todos os campos obrigatórios e corrija os erros.")};if(t.length===0&&!m)return e.jsx("div",{className:"flex h-screen items-center justify-center",children:"Redirecionando..."});if(C)return e.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[e.jsx(z,{className:"h-10 w-48 mb-6"}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(z,{className:"h-64 w-full"}),e.jsx(z,{className:"h-64 w-full"})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(z,{className:"h-96 w-full sticky top-4"})})]})]});if(h)return e.jsx("div",{className:"container mx-auto p-4 max-w-6xl",children:e.jsxs(ce,{variant:"destructive",children:[e.jsx(cr,{className:"h-4 w-4"}),e.jsx(le,{children:"Erro de Conexão"}),e.jsx(de,{children:j instanceof Error?j.message:"Não foi possível carregar os dados."})]})});const B=se.isPending||m;return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b bg-card sticky top-0 z-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 max-w-6xl flex items-center",children:[e.jsx(Ue,{to:"/menu",children:e.jsx(X,{variant:"ghost",size:"icon",className:"mr-4",children:e.jsx(ur,{className:"h-5 w-5"})})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Finalizar Pedido"})]})}),e.jsx("main",{className:"container mx-auto px-4 py-8 max-w-6xl",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsx(lr,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(Be,qe),className:"space-y-6",children:[e.jsxs(L,{children:[e.jsx(G,{children:e.jsx(D,{className:"text-xl",children:"1. Seus Dados"})}),e.jsxs(O,{className:"space-y-4",children:[e.jsx(y,{control:d.control,name:"name",render:({field:s})=>e.jsxs(f,{children:[e.jsx(g,{children:"Nome Completo *"}),e.jsx(I,{placeholder:"Seu nome",...s}),e.jsx(v,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(y,{control:d.control,name:"phone",render:({field:s})=>e.jsxs(f,{children:[e.jsx(g,{children:"Telefone *"}),e.jsx($e,{...s}),e.jsx(v,{})]})}),e.jsx(y,{control:d.control,name:"email",render:({field:s})=>e.jsxs(f,{children:[e.jsx(g,{children:"Email (Opcional)"}),e.jsx(I,{placeholder:"seu@email.com",...s}),e.jsx(v,{})]})})]})]})]}),e.jsxs(L,{children:[e.jsx(G,{children:e.jsx(D,{className:"text-xl",children:"2. Entrega"})}),e.jsxs(O,{className:"space-y-4",children:[e.jsx(y,{control:d.control,name:"delivery_option",render:({field:s})=>e.jsxs(f,{className:"space-y-3",children:[e.jsx(T,{children:e.jsxs(Y,{onValueChange:s.onChange,defaultValue:s.value,className:"flex flex-col space-y-1",children:[e.jsxs(f,{className:"flex items-center space-x-3 space-y-0 border p-4 rounded-lg cursor-pointer",children:[e.jsx(T,{children:e.jsx(M,{value:"delivery"})}),e.jsx(ue,{className:"h-5 w-5 text-primary"}),e.jsx(g,{className:"font-normal flex-1 cursor-pointer",children:"Delivery"})]}),e.jsxs(f,{className:"flex items-center space-x-3 space-y-0 border p-4 rounded-lg cursor-pointer",children:[e.jsx(T,{children:e.jsx(M,{value:"pickup"})}),e.jsx(fe,{className:"h-5 w-5 text-primary"}),e.jsx(g,{className:"font-normal flex-1 cursor-pointer",children:"Retirada no Local"})]})]})}),e.jsx(v,{})]})}),H==="delivery"&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(fr,{className:"h-4 w-4"})," Endereço de Entrega *"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(y,{control:d.control,name:"street",render:({field:s})=>e.jsxs(f,{className:"col-span-2",children:[e.jsx(g,{children:"Rua"}),e.jsx(I,{...s}),e.jsx(v,{})]})}),e.jsx(y,{control:d.control,name:"number",render:({field:s})=>e.jsxs(f,{className:"col-span-1",children:[e.jsx(g,{children:"Número"}),e.jsx(I,{...s}),e.jsx(v,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(y,{control:d.control,name:"neighborhood",render:({field:s})=>e.jsxs(f,{children:[e.jsx(g,{children:"Bairro"}),e.jsx(I,{...s}),e.jsx(v,{})]})}),e.jsx(y,{control:d.control,name:"city",render:({field:s})=>e.jsxs(f,{children:[e.jsx(g,{children:"Cidade"}),e.jsx(I,{...s}),e.jsx(v,{})]})})]}),e.jsx(y,{control:d.control,name:"zip_code",render:({field:s})=>e.jsxs(f,{children:[e.jsx(g,{children:"CEP"}),e.jsx(dr,{...s}),e.jsx(v,{})]})}),c>0&&e.jsxs(ce,{className:"mt-4",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx(le,{children:"Taxa de Entrega Aplicada"}),e.jsxs(de,{children:["Taxa: ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c)]})]})]})]})]}),e.jsxs(L,{children:[e.jsx(G,{children:e.jsx(D,{className:"text-xl",children:"3. Pagamento"})}),e.jsxs(O,{className:"space-y-4",children:[e.jsx(y,{control:d.control,name:"payment_method_id",render:({field:s})=>e.jsxs(f,{className:"space-y-3",children:[e.jsx(T,{children:e.jsx(Y,{onValueChange:s.onChange,defaultValue:s.value,className:"flex flex-col space-y-2",children:b.map(w=>{const q=Fr(w.icon||"Store");return e.jsxs(f,{className:"flex items-center space-x-3 space-y-0 border p-4 rounded-lg cursor-pointer",children:[e.jsx(T,{children:e.jsx(M,{value:w.id})}),e.jsx(q,{className:"h-5 w-5 text-primary"}),e.jsxs(g,{className:"font-normal flex-1 cursor-pointer",children:[w.name,e.jsx("span",{className:"block text-xs text-muted-foreground",children:w.description})]})]},w.id)})})}),e.jsx(v,{})]})}),A&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"})," Detalhes Adicionais"]}),e.jsx(y,{control:d.control,name:"cpf_cnpj",render:({field:s})=>e.jsxs(f,{children:[e.jsx(g,{children:"CPF/CNPJ (para a nota)"}),e.jsx(Fe,{...s}),e.jsx(v,{})]})})]}),Ae&&e.jsx(y,{control:d.control,name:"change_for",render:({field:s})=>e.jsxs(f,{children:[e.jsx(g,{children:"Precisa de troco para quanto? (R$)"}),e.jsx(I,{type:"number",step:"0.01",placeholder:new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2}).format(i),...s,value:s.value===null||s.value===void 0?"":String(s.value),onChange:w=>s.onChange(w.target.value===""?null:w.target.value)}),e.jsx(v,{})]})}),e.jsx(y,{control:d.control,name:"notes",render:({field:s})=>e.jsxs(f,{children:[e.jsx(g,{children:"Observações do Pedido (Opcional)"}),e.jsx(ir,{placeholder:"Ex: Tocar a campainha duas vezes...",...s,rows:2}),e.jsx(v,{})]})})]})]}),e.jsx("div",{className:"lg:hidden sticky bottom-0 bg-card p-4 border-t shadow-2xl",children:e.jsx(X,{type:"submit",className:"w-full h-12 text-lg",disabled:B,children:B?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"mr-2 h-4 w-4 animate-spin"})," Processando..."]}):`Finalizar Pedido - ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i)}`})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(X,{type:"submit",className:"w-full h-12 text-lg",disabled:B,children:B?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"mr-2 h-4 w-4 animate-spin"})," Processando..."]}):`Finalizar Pedido - ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i)}`})})]})})}),e.jsx("div",{className:"lg:col-span-1 hidden lg:block",children:e.jsx(Tr,{...n})})]})})]})};export{os as default};
