import{j as e,b as Dr,u as ce,c as zr}from"./tanstack-D8i8yNxB.js";import{r as l,R as Qe,u as Gr,h as Kr,L as Ur}from"./vendor-Dl0Wzy4_.js";import{o as Zr,s as V,l as Jr,e as Hr,p as Ee,c as Ue,n as Qr,Z as U,u as Wr,t as Xr}from"./types-BCrSgEF3.js";import{s as M}from"./client-BmrnLCXS.js";import{c as Fe,f as Ie,g as xe,P as H,i as fe,h as We,l as Yr,m as Xe,b as ne,n as eo,k as ro,a as Ye,u as N,v as oo,L as Pe}from"./index-D3OZ5X3R.js";import{B as re}from"./button-MXpwI8rL.js";import{C as de,b as ue,c as me,a as pe}from"./card-D8qA1pGN.js";import{I as O}from"./label-MXTuQFQ6.js";import{c as er,R as so,I as ao,a as to,C as no}from"./index-DHEszFmL.js";import{u as io}from"./index-BB_oiUC3.js";import{u as lo}from"./index-PuW-_iwo.js";import{S as te}from"./separator-BkxHd1Vq.js";import{T as co}from"./textarea-ChTjzmux.js";import{A as oe,a as se,b as ae}from"./alert-mq6-S5v8.js";import{F as uo,b as I,c as C,a as P,e as k,d as X}from"./form-DlN2AGiw.js";import{Z as mo,M as po}from"./MapLocationSection-DTQI733C.js";import{S as ho}from"./shopping-cart-D_ej_DDu.js";import{T as Ze}from"./terminal-Wlclcd1s.js";import{A as fo}from"./arrow-left-CtTj-po2.js";import{T as Je}from"./truck-Q0PUfD9P.js";import{S as rr,a as go}from"./store-B3IystvQ.js";import{M as He}from"./map-pin-B_yVt4nX.js";import{C as or}from"./credit-card-BGk1EGmh.js";import{P as xo}from"./package-Cpu0bVWd.js";import{D as yo}from"./dollar-sign-BqFFhQ5p.js";import"./supabase-A1WgB1xz.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Fe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=Fe("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Fe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var ke="Radio",[No,sr]=Ie(ke),[Co,wo]=No(ke),ar=l.forwardRef((s,r)=>{const{__scopeRadio:t,name:u,checked:n=!1,required:c,disabled:i,value:m="on",onCheck:g,form:f,...j}=s,[w,_]=l.useState(null),x=xe(r,$=>_($)),y=l.useRef(!1),v=w?f||!!w.closest("form"):!0;return e.jsxs(Co,{scope:t,checked:n,disabled:i,children:[e.jsx(H.button,{type:"button",role:"radio","aria-checked":n,"data-state":lr(n),"data-disabled":i?"":void 0,disabled:i,value:m,...j,ref:x,onClick:fe(s.onClick,$=>{n||g==null||g(),v&&(y.current=$.isPropagationStopped(),y.current||$.stopPropagation())})}),v&&e.jsx(ir,{control:w,bubbles:!y.current,name:u,value:m,checked:n,required:c,disabled:i,form:f,style:{transform:"translateX(-100%)"}})]})});ar.displayName=ke;var tr="RadioIndicator",nr=l.forwardRef((s,r)=>{const{__scopeRadio:t,forceMount:u,...n}=s,c=wo(tr,t);return e.jsx(We,{present:u||c.checked,children:e.jsx(H.span,{"data-state":lr(c.checked),"data-disabled":c.disabled?"":void 0,...n,ref:r})})});nr.displayName=tr;var _o="RadioBubbleInput",ir=l.forwardRef(({__scopeRadio:s,control:r,checked:t,bubbles:u=!0,...n},c)=>{const i=l.useRef(null),m=xe(i,c),g=lo(t),f=Yr(r);return l.useEffect(()=>{const j=i.current;if(!j)return;const w=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(w,"checked").set;if(g!==t&&x){const y=new Event("click",{bubbles:u});x.call(j,t),j.dispatchEvent(y)}},[g,t,u]),e.jsx(H.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...n,tabIndex:-1,ref:m,style:{...n.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ir.displayName=_o;function lr(s){return s?"checked":"unchecked"}var Ro=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ye="RadioGroup",[Eo,_s]=Ie(ye,[er,sr]),cr=er(),dr=sr(),[Po,So]=Eo(ye),ur=l.forwardRef((s,r)=>{const{__scopeRadioGroup:t,name:u,defaultValue:n,value:c,required:i=!1,disabled:m=!1,orientation:g,dir:f,loop:j=!0,onValueChange:w,..._}=s,x=cr(t),y=io(f),[v,$]=Xe({prop:c,defaultProp:n??null,onChange:w,caller:ye});return e.jsx(Po,{scope:t,name:u,required:i,disabled:m,value:v,onValueChange:$,children:e.jsx(so,{asChild:!0,...x,orientation:g,dir:y,loop:j,children:e.jsx(H.div,{role:"radiogroup","aria-required":i,"aria-orientation":g,"data-disabled":m?"":void 0,dir:y,..._,ref:r})})})});ur.displayName=ye;var mr="RadioGroupItem",pr=l.forwardRef((s,r)=>{const{__scopeRadioGroup:t,disabled:u,...n}=s,c=So(mr,t),i=c.disabled||u,m=cr(t),g=dr(t),f=l.useRef(null),j=xe(r,f),w=c.value===n.value,_=l.useRef(!1);return l.useEffect(()=>{const x=v=>{Ro.includes(v.key)&&(_.current=!0)},y=()=>_.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",y)}},[]),e.jsx(ao,{asChild:!0,...m,focusable:!i,active:w,children:e.jsx(ar,{disabled:i,required:c.required,checked:w,...g,...n,name:c.name,ref:j,onCheck:()=>c.onValueChange(n.value),onKeyDown:fe(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:fe(n.onFocus,()=>{var x;_.current&&((x=f.current)==null||x.click())})})})});pr.displayName=mr;var Fo="RadioGroupIndicator",hr=l.forwardRef((s,r)=>{const{__scopeRadioGroup:t,...u}=s,n=dr(t);return e.jsx(nr,{...n,...u,ref:r})});hr.displayName=Fo;var fr=ur,gr=pr,Io=hr;const Se=l.forwardRef(({className:s,...r},t)=>e.jsx(fr,{className:ne("grid gap-2",s),...r,ref:t}));Se.displayName=fr.displayName;const he=l.forwardRef(({className:s,...r},t)=>e.jsx(gr,{ref:t,className:ne("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:e.jsx(Io,{className:"flex items-center justify-center",children:e.jsx(jo,{className:"h-2.5 w-2.5 fill-current text-current"})})}));he.displayName=gr.displayName;const ko=s=>{let r=s.replace(/\D/g,"");return r.length>11&&(r=r.slice(0,11)),r.length>0&&(r=`(${r}`),r.length>3&&(r=`${r.slice(0,3)}) ${r.slice(3)}`),r.length>10&&(r=`${r.slice(0,10)}-${r.slice(10)}`),r},xr=Qe.forwardRef(({className:s,value:r,onChange:t,...u},n)=>{const c=i=>{const m=i.target.value,g=ko(m),f={...i,target:{...i.target,value:g}};t(f)};return e.jsx(O,{ref:n,type:"tel",className:ne("w-full",s),placeholder:"(99) 99999-9999",value:r,onChange:c,...u})});xr.displayName="PhoneInput";const Lo=s=>{let r=s.replace(/\D/g,"");return r.length>14&&(r=r.slice(0,14)),r.length<=11?(r.length>9&&(r=`${r.slice(0,9)}-${r.slice(9)}`),r.length>6&&(r=`${r.slice(0,6)}.${r.slice(6)}`),r.length>3&&(r=`${r.slice(0,3)}.${r.slice(3)}`),r):(r.length>12&&(r=`${r.slice(0,12)}-${r.slice(12)}`),r.length>8&&(r=`${r.slice(0,8)}/${r.slice(8)}`),r.length>5&&(r=`${r.slice(0,5)}.${r.slice(5)}`),r.length>2&&(r=`${r.slice(0,2)}.${r.slice(2)}`),r)},yr=Qe.forwardRef(({className:s,value:r,onChange:t,...u},n)=>{const c=i=>{const m=i.target.value,g=Lo(m),f={...i,target:{...i.target,value:g}};t(f)};return e.jsx(O,{ref:n,type:"tel",className:ne("w-full",s),placeholder:"CPF ou CNPJ",value:r,onChange:c,maxLength:18,...u})});yr.displayName="CpfCnpjInput";const Vo=(s,r,t,u)=>{const c=(t-s)*(Math.PI/180),i=(u-r)*(Math.PI/180),m=Math.sin(c/2)*Math.sin(c/2)+Math.cos(s*(Math.PI/180))*Math.cos(t*(Math.PI/180))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)))},$o=async s=>{const r=s.replace(/\s+/g," ").trim(),t=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r)}&limit=1`,u=new AbortController,n=setTimeout(()=>u.abort(),1e4);try{console.log("LOG: geocodeAddress - URL da API:",t);const c=await fetch(t,{signal:u.signal});if(!c.ok)return console.error("LOG: geocodeAddress - Resposta da API não OK. Status:",c.status),null;const i=await c.json();if(i&&Array.isArray(i)&&i.length>0){const m=i[0],g=parseFloat(m.lat),f=parseFloat(m.lon);if(Number.isFinite(g)&&Number.isFinite(f))return console.log("LOG: geocodeAddress - Sucesso. Coordenadas:",[g,f]),{lat:g,lng:f}}return console.warn("LOG: geocodeAddress - Falha. Nenhum resultado encontrado ou coordenadas inválidas para:",r),null}catch(c){return c instanceof Error&&c.name==="AbortError"?console.error("LOG: geocodeAddress - Timeout na requisição (10s). Endereço:",r):console.error("LOG: geocodeAddress - Erro durante a requisição:",c),null}finally{clearTimeout(n)}},Ao=(s,r,t)=>{const u=Vo(r[0],r[1],s[0],s[1]),n=t.find(c=>u<=c.max_distance_km);if(n){const c=n.delivery_fee||0,i=n.min_delivery_time_minutes||0,m=i+15;return{fee:parseFloat(c.toFixed(2)),minTime:i,maxTime:m}}return null};var je="Collapsible",[To,Rs]=Ie(je),[Oo,Le]=To(je),jr=l.forwardRef((s,r)=>{const{__scopeCollapsible:t,open:u,defaultOpen:n,disabled:c,onOpenChange:i,...m}=s,[g,f]=Xe({prop:u,defaultProp:n??!1,onChange:i,caller:je});return e.jsx(Oo,{scope:t,disabled:c,contentId:eo(),open:g,onOpenToggle:l.useCallback(()=>f(j=>!j),[f]),children:e.jsx(H.div,{"data-state":$e(g),"data-disabled":c?"":void 0,...m,ref:r})})});jr.displayName=je;var vr="CollapsibleTrigger",br=l.forwardRef((s,r)=>{const{__scopeCollapsible:t,...u}=s,n=Le(vr,t);return e.jsx(H.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":$e(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...u,ref:r,onClick:fe(s.onClick,n.onOpenToggle)})});br.displayName=vr;var Ve="CollapsibleContent",Nr=l.forwardRef((s,r)=>{const{forceMount:t,...u}=s,n=Le(Ve,s.__scopeCollapsible);return e.jsx(We,{present:t||n.open,children:({present:c})=>e.jsx(Mo,{...u,ref:r,present:c})})});Nr.displayName=Ve;var Mo=l.forwardRef((s,r)=>{const{__scopeCollapsible:t,present:u,children:n,...c}=s,i=Le(Ve,t),[m,g]=l.useState(u),f=l.useRef(null),j=xe(r,f),w=l.useRef(0),_=w.current,x=l.useRef(0),y=x.current,v=i.open||m,$=l.useRef(v),L=l.useRef(void 0);return l.useEffect(()=>{const R=requestAnimationFrame(()=>$.current=!1);return()=>cancelAnimationFrame(R)},[]),ro(()=>{const R=f.current;if(R){L.current=L.current||{transitionDuration:R.style.transitionDuration,animationName:R.style.animationName},R.style.transitionDuration="0s",R.style.animationName="none";const Z=R.getBoundingClientRect();w.current=Z.height,x.current=Z.width,$.current||(R.style.transitionDuration=L.current.transitionDuration,R.style.animationName=L.current.animationName),g(u)}},[i.open,u]),e.jsx(H.div,{"data-state":$e(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!v,...c,ref:j,style:{"--radix-collapsible-content-height":_?`${_}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...s.style},children:v&&n})});function $e(s){return s?"open":"closed"}var qo=jr;const Bo=qo,Do=br,zo=Nr,Go=()=>{const{items:s,subtotal:r,deliveryFee:t,total:u,totalItems:n}=Ye(),[c,i]=l.useState(!1);return n===0?null:e.jsxs(Bo,{open:c,onOpenChange:i,className:"lg:hidden sticky top-0 z-40 bg-card border-b shadow-md",children:[e.jsx(Do,{asChild:!0,children:e.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ho,{className:"h-5 w-5 text-primary"}),e.jsxs("span",{className:"font-semibold text-lg",children:["Seu Pedido (",n," ",n===1?"item":"itens",")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-primary",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u)}),c?e.jsx(to,{className:"h-5 w-5"}):e.jsx(no,{className:"h-5 w-5"})]})]})}),e.jsxs(zo,{className:"p-4 pt-0",children:[e.jsx(te,{className:"mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-2",children:s.map(m=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[m.quantity,"x ",m.name,m.notes&&e.jsxs("span",{className:"block text-xs italic",children:["(",m.notes,")"]})]}),e.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m.price*m.quantity)})]},m.id))}),e.jsx(te,{}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Taxa de Entrega:"}),e.jsx("span",{className:"font-medium text-primary",children:t>0?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t):"Grátis"})]})]}),e.jsx(te,{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{className:"text-primary",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u)})]})]})]})]})},Cr=s=>s.replace(/\D/g,""),wr=s=>s.replace(/\D/g,""),ge=s=>s.replace(/\D/g,""),Ko=Zr({name:V().min(1,"Nome é obrigatório."),phone:V().min(1,"Telefone é obrigatório.").transform(Cr).refine(s=>s.length>=10,{message:"O telefone deve ter pelo menos 10 dígitos (incluindo DDD)."}),email:V().email("Email inválido.").optional().or(Jr("")),delivery_option:Hr(["delivery","pickup"],{required_error:"Selecione uma opção de entrega."}),street:V().optional().default(""),number:V().optional().default(""),complement:V().optional().default(""),neighborhood:V().optional().default(""),city:V().optional().default(""),zip_code:V().optional().default("").transform(wr).refine(s=>s.length===8||s.length===0,{message:"CEP inválido. Deve conter 8 dígitos."}),latitude:Ee(s=>typeof s=="string"?parseFloat(s):s,Ue.number().optional().nullable()),longitude:Ee(s=>typeof s=="string"?parseFloat(s):s,Ue.number().optional().nullable()),payment_method_id:V().min(1,"Selecione uma forma de pagamento."),notes:V().optional(),cpf_cnpj:V().optional().default("").transform(ge).refine(s=>s.length===0||s.length===11||s.length===14,{message:"CPF deve ter 11 dígitos ou CNPJ 14 dígitos."}),change_for:Ee(s=>{if(s==null||s==="")return null;const r=String(s).replace(",","."),t=parseFloat(r);return isNaN(t)?r:t},Qr({invalid_type_error:"O troco deve ser um número."}).optional().nullable())}).superRefine((s,r)=>{if(s.delivery_option==="delivery"&&(s.street.trim()===""&&r.addIssue({code:U.custom,message:"Rua é obrigatória.",path:["street"]}),s.number.trim()===""&&r.addIssue({code:U.custom,message:"Número é obrigatório.",path:["number"]}),s.neighborhood.trim()===""&&r.addIssue({code:U.custom,message:"Bairro é obrigatório.",path:["neighborhood"]}),s.city.trim()===""&&r.addIssue({code:U.custom,message:"Cidade é obrigatória.",path:["city"]}),s.zip_code.length!==8&&r.addIssue({code:U.custom,message:"CEP é obrigatório e deve ter 8 dígitos.",path:["zip_code"]}),(s.latitude===null||s.longitude===null)&&r.addIssue({code:U.custom,message:"A localização deve ser salva no mapa para calcular a taxa de entrega.",path:["latitude"]})),s.payment_method_id==="Dinheiro"&&s.change_for!==null&&s.change_for!==void 0&&s.change_for<=0&&r.addIssue({code:U.custom,message:"O valor do troco deve ser positivo.",path:["change_for"]}),s.payment_method_id==="Pagamento online: Pix/Cartão"){const n=ge(s.cpf_cnpj||"");n.length!==11&&n.length!==14&&r.addIssue({code:U.custom,message:"CPF/CNPJ é obrigatório para pagamento online.",path:["cpf_cnpj"]})}}),Uo=()=>{const s=window.location.origin,t=window.location.pathname.split("/")[1];return t?`${s}/${t}`:s},Zo=async()=>{const{data:s,error:r}=await M.from("restaurants").select("id, name, address, phone, email, street, number, neighborhood, city, zip_code, latitude, longitude, delivery_enabled").eq("is_active",!0).limit(1).single();if(r)throw new Error(`Erro ao buscar restaurante: ${r.message}`);if(!s)throw new Error("Nenhum restaurante ativo encontrado.");return s},Jo=async s=>{const{data:r,error:t}=await M.from("restaurants").select("delivery_enabled").eq("id",s).single();if(t)throw new Error(`Erro ao buscar status de entrega: ${t.message}`);return r.delivery_enabled??!0},Ho=async s=>{const{data:r,error:t}=await M.from("payment_methods").select("*").eq("restaurant_id",s).eq("is_active",!0).order("name",{ascending:!0});if(t)throw new Error(`Erro ao buscar métodos de pagamento: ${t.message}`);return r},Qo=async s=>{const{data:r,error:t}=await M.from("delivery_zones").select("*").eq("restaurant_id",s).eq("is_active",!0).order("max_distance_km",{ascending:!0});if(t)throw new Error(`Erro ao buscar zonas de entrega: ${t.message}`);return r},Wo=s=>{switch(s){case"DollarSign":return yo;case"Smartphone":return go;case"CreditCard":return or;case"Package":return xo;default:return rr}},Xo=({subtotal:s,deliveryFee:r,total:t,items:u})=>e.jsxs(de,{className:"sticky top-4",children:[e.jsx(ue,{children:e.jsx(me,{className:"text-xl",children:"Seu Pedido"})}),e.jsxs(pe,{className:"space-y-3",children:[e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:u.map(n=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[n.quantity,"x ",n.name,n.notes&&e.jsxs("span",{className:"block text-xs italic",children:["(",n.notes,")"]})]}),e.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n.price*n.quantity)})]},n.id))}),e.jsx(te,{}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Taxa de Entrega:"}),e.jsx("span",{className:"font-medium text-primary",children:r>0?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r):"Grátis"})]})]}),e.jsx(te,{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{className:"text-primary",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)})]})]})]}),Es=()=>{const s=Gr(),r=Dr(),t=Ye(),{items:u,subtotal:n,deliveryFee:c,total:i,setDeliveryFee:m,clearCart:g}=t,[f]=Kr(),[j,w]=l.useState(!1),[_,x]=l.useState(!1),[y,v]=l.useState(null),[$,L]=l.useState(null),R=f.get("status"),Z=f.get("external_reference"),Ae=f.has("collection_id")||f.has("external_reference"),[ie,Te]=l.useState(!!Z);l.useEffect(()=>{if(Z)if(R==="approved"||R==="failure"||R==="pending"){s(`/order-success/${Z}?status=${R}`,{replace:!0});return}else Ae&&(N.info("Pagamento cancelado.",{description:"Você pode tentar novamente ou escolher outro método de pagamento."}),window.history.replaceState({},document.title,window.location.pathname+window.location.hash.split("?")[0]),Te(!1));else Te(!1)},[Z,R,Ae,s]);const{data:p,isLoading:_r,isError:Rr,error:Er}=ce({queryKey:["checkoutRestaurantData"],queryFn:Zo}),{data:D,isLoading:ve}=ce({queryKey:["deliveryStatus",p==null?void 0:p.id],queryFn:()=>Jo(p.id),enabled:!!(p!=null&&p.id)}),{data:Q=[],isLoading:Pr}=ce({queryKey:["checkoutPaymentMethods",p==null?void 0:p.id],queryFn:()=>Ho(p.id),enabled:!!(p!=null&&p.id)}),{data:Oe=[],isLoading:Sr}=ce({queryKey:["checkoutDeliveryZones",p==null?void 0:p.id],queryFn:()=>Qo(p.id),enabled:!!(p!=null&&p.id)}),Fr=_r||ve||Pr||Sr,Ir=Rr,Me=Er,a=Wr({resolver:Xr(Ko),defaultValues:{name:"",phone:"",email:"",delivery_option:"delivery",street:"",number:"",complement:"",neighborhood:"",city:"",zip_code:"",payment_method_id:"",notes:"",cpf_cnpj:"",change_for:null,latitude:null,longitude:null},mode:"onBlur"}),q=a.watch("delivery_option"),be=a.watch("payment_method_id"),W=Q.find(o=>o.id===be),J=(W==null?void 0:W.name)==="Pagamento online: Pix/Cartão",Y=(W==null?void 0:W.name)==="Dinheiro",S=a.watch("latitude"),F=a.watch("longitude");a.watch(["street","number","neighborhood","city","zip_code"]);const z=q==="delivery",kr=l.useMemo(()=>JSON.stringify({deliveryOption:q,deliveryEnabled:D,lat:S,lng:F}),[q,D,S,F]),Lr=l.useMemo(()=>typeof S=="number"&&typeof F=="number"&&!isNaN(S)&&!isNaN(F)?[S,F]:p!=null&&p.latitude&&(p!=null&&p.longitude)?[p.latitude,p.longitude]:[-23.55052,-46.633308],[S,F,p]),Vr=l.useMemo(()=>S===null||F===null?`map-${q}-null`:`map-${q}-${S.toFixed(6)}-${F.toFixed(6)}`,[z,q,S,F]),Ne=l.useCallback(o=>{const d=o.road||o.logradouro||"",h=o.house_number||"",b=o.suburb||o.bairro||"",E=o.city||o.localidade||"",A=o.postcode||o.cep||"";a.setValue("street",d,{shouldValidate:!0}),a.setValue("number",h||"",{shouldValidate:!0}),a.setValue("complement",o.suburb||"",{shouldValidate:!0}),a.setValue("neighborhood",b,{shouldValidate:!0}),a.setValue("city",E,{shouldValidate:!0}),a.setValue("zip_code",A,{shouldValidate:!0})},[a]),$r=l.useCallback(async(o,d)=>{a.setValue("latitude",o,{shouldValidate:!0}),a.setValue("longitude",d,{shouldValidate:!0});const h=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${o}&lon=${d}&addressdetails=1`,b=await fetch(h);if(b.ok){const E=await b.json();E.address&&(Ne(E.address),N.info("Endereço preenchido a partir do mapa."))}},[a,Ne]),Ar=l.useCallback(()=>{a.setValue("street","",{shouldValidate:!0}),a.setValue("number","",{shouldValidate:!0}),a.setValue("complement","",{shouldValidate:!0}),a.setValue("neighborhood","",{shouldValidate:!0}),a.setValue("city","",{shouldValidate:!0}),a.setValue("zip_code","",{shouldValidate:!0}),a.setValue("latitude",null,{shouldValidate:!0}),a.setValue("longitude",null,{shouldValidate:!0}),m(0),v(null),L(null),N.info("Endereço limpo."),localStorage.removeItem("checkoutFormData")},[a,m]),Ce=l.useCallback(o=>{try{const d={name:o.name,phone:o.phone,email:o.email,delivery_option:o.delivery_option,street:o.street,number:o.number,complement:o.complement,neighborhood:o.neighborhood,city:o.city,zip_code:o.zip_code,latitude:o.latitude,longitude:o.longitude};localStorage.setItem("checkoutFormData",JSON.stringify(d))}catch(d){console.error("Failed to save form data to local storage",d)}},[]),qe=l.useCallback(()=>{try{const o=localStorage.getItem("checkoutFormData");if(o){const d=JSON.parse(o);a.reset({...a.getValues(),...d,delivery_option:d.delivery_option||"delivery"})}}catch(o){console.error("Failed to load form data from local storage",o)}},[a]);l.useEffect(()=>{qe()},[qe]),l.useEffect(()=>{const o=a.watch(d=>{Ce(d)});return()=>o.unsubscribe()},[a,Ce]);const Tr=async()=>{const o=a.getValues(),[d,h,b,E,A]=[o.street,o.number,o.neighborhood,o.city,o.zip_code],le=wr(A);if(!(d&&h&&b&&E&&le.length===8)){console.log("LOG: Validação de endereço incompleto falhou."),N.error("Preencha o endereço completo (Rua, Número, Bairro, Cidade, CEP) antes de salvar.");return}console.log("LOG: Iniciando geocodificação para:",`${d}, ${h}, ${b}, ${E}, ${A}`),x(!0);const Re=N.loading("Buscando coordenadas e salvando endereço...");try{const G=`${d}, ${h}, ${b}, ${E}, ${A}`,K=await $o(G);K?(console.log("LOG: Geocodificação bem-sucedida. Coordenadas:",K),a.setValue("latitude",K.lat,{shouldValidate:!0}),a.setValue("longitude",K.lng,{shouldValidate:!0}),await a.trigger("latitude"),Ce(a.getValues()),N.success("Endereço e localização salvos com sucesso!")):(console.log("LOG: Geocodificação falhou ou retornou coordenadas inválidas."),a.setError("latitude",{type:"manual",message:"Endereço não encontrado. Verifique se está correto."}),N.error("Endereço não encontrado.",{description:"Por favor, verifique o endereço digitado e tente novamente.",duration:8e3}))}catch(G){console.error("LOG: Erro capturado durante a geocodificação:",G),a.setError("latitude",{type:"manual",message:"Erro ao buscar coordenadas. Tente novamente."}),N.error("Erro ao buscar coordenadas.",{description:"Verifique sua conexão ou tente novamente.",duration:8e3})}finally{setTimeout(()=>{x(!1);try{N.dismiss(Re)}catch(G){console.warn("LOG: Erro ao descartar toast (pode ter sido removido):",G)}},0)}};l.useEffect(()=>{Y||a.setValue("change_for",null,{shouldValidate:!0})},[Y,a]),l.useEffect(()=>{q==="pickup"&&(m(0),v(null),L(null),a.setValue("latitude",null),a.setValue("longitude",null))},[q,z,a,m,S,F]),l.useEffect(()=>{Q.length>0&&!be&&a.setValue("payment_method_id",Q[0].id)},[Q,be,a]),l.useEffect(()=>{J?a.trigger("cpf_cnpj"):a.clearErrors("cpf_cnpj")},[J,a]),l.useEffect(()=>{const o=async()=>{if(q==="pickup"||!(p!=null&&p.latitude)||!(p!=null&&p.longitude)){m(0),v(null),L(null);return}if(ve)return;if(D===!1){m(0),v(null),L(null),x(!1);return}x(!0),v(null);let h=null;if(S&&F)h=[S,F];else{m(0),L(null),x(!1);return}if(h){const b=[p.latitude,p.longitude],E=Ao(h,b,Oe);E?(m(E.fee),v(null),L({minTime:E.minTime,maxTime:E.maxTime})):(m(0),v("Seu endereço está fora da nossa área de entrega."),L(null))}x(!1)},d=setTimeout(()=>{o()},500);return()=>clearTimeout(d)},[kr,p,Oe,a,m,z,S,F,D,ve]),l.useEffect(()=>{if(u.length===0&&!j&&!ie){const o=setTimeout(()=>{N.info("Seu carrinho está vazio. Adicione itens para continuar."),s("/menu")},0);return()=>clearTimeout(o)}},[u.length,s,j,ie]);const Be=zr({mutationFn:async o=>{if(!p)throw new Error("Dados do restaurante indisponíveis.");if(o.delivery_option==="delivery"&&y)throw new Error(y);const d=[o.street,o.number,o.complement?`(${o.complement})`:null,o.neighborhood,o.city,o.zip_code].filter(Boolean).join(", "),h=o.delivery_option==="delivery"?d:"Retirada no Local";let b;const E=Cr(o.phone),A=ge(o.cpf_cnpj||""),{data:le}=await M.from("customers").select("id").eq("phone",E).limit(1).single();if(le)b=le.id,A&&await M.from("customers").update({cpf_cnpj:A}).eq("id",b);else{const{data:T,error:ee}=await M.from("customers").insert({name:o.name,phone:E,email:o.email||null,address:h,latitude:o.latitude,longitude:o.longitude,cpf_cnpj:A||null}).select("id").single();if(ee)throw new Error(`Erro ao criar cliente: ${ee.message}`);b=T.id}const ze=J?"pending_payment":"pending",{data:Re,error:G}=await M.from("orders").insert({restaurant_id:p.id,customer_id:b,status:ze,total_amount:i,delivery_fee:c,notes:o.notes,delivery_address:h,payment_method_id:o.payment_method_id,change_for:Y?o.change_for:null}).select("id").single();if(G)throw new Error(`Erro ao criar pedido: ${G.message}`);const K=Re.id,Br=u.map(T=>({order_id:K,product_id:T.product_id,quantity:T.quantity,unit_price:T.price,subtotal:T.price*T.quantity,notes:T.notes})),{error:Ge}=await M.from("order_items").insert(Br);if(Ge)throw new Error(`Erro ao adicionar itens do pedido: ${Ge.message}`);if(J){g(),w(!0),N.info("Redirecionando para o pagamento online...");const T=Uo(),ee={orderId:K,items:u,totalAmount:parseFloat(i.toFixed(2)),restaurantName:p.name,clientUrl:T,customerEmail:o.email||"cliente@pedido123.com",customerCpfCnpj:A};console.log("Payload enviado para create-payment-preference:",ee);try{const{data:B,error:Ke}=await M.functions.invoke("create-payment-preference",{body:ee});if(Ke)throw new Error(Ke.message);if(B&&B.error)throw new Error(`Mercado Pago Error: ${B.error}`);if(B&&B.init_point){window.location.href=B.init_point;return}else throw new Error("Resposta de pagamento inválida: init_point não encontrado.")}catch(B){throw console.error("Erro ao criar preferência de pagamento:",B),new Error(`Falha ao processar pagamento online: ${B.message}`)}}return K},onSuccess:o=>{J||(N.success(`Pedido #${o.slice(-4)} realizado com sucesso!`),r.invalidateQueries({queryKey:["orders"]}),localStorage.removeItem("checkoutFormData"),s(`/order-success/${o}`))},onError:o=>{let d="Ocorreu um erro ao finalizar seu pedido. Por favor, tente novamente.";const h=o.message||"";h.includes("Mercado Pago Error:")?(d=h.split("Mercado Pago Error:")[1].trim(),d.includes("access token")&&(d="O Access Token do Mercado Pago está incorreto ou ausente. Por favor, verifique as configurações do restaurante.")):h.toLowerCase().includes("access token")||h.toLowerCase().includes("credentials")?d="Ocorreu um problema com a configuração de pagamento do restaurante. Por favor, entre em contato com o estabelecimento.":h.toLowerCase().includes("fora da nossa área de entrega")?d="Seu endereço está fora da nossa área de entrega.":h.toLowerCase().includes("inconsistência no valor total")?d="Erro de cálculo no pedido. Por favor, tente limpar o carrinho e refazer o pedido.":h.toLowerCase().includes("falha ao processar pagamento online")&&(d=h.split("Falha ao processar pagamento online:")[1]||"Erro ao processar pagamento online. Por favor, tente novamente."),N.error("Falha ao processar o pagamento",{description:d,duration:1e4}),w(!1)}}),Or=async o=>{if(o.delivery_option==="delivery"&&(o.latitude===null||o.longitude===null)){a.setError("latitude",{type:"manual",message:"A localização deve ser salva no mapa para calcular a taxa de entrega."}),N.error('Por favor, clique em "Salvar Endereço" para confirmar a localização no mapa.');return}if(J){const d=o.cpf_cnpj||"",h=ge(d);if(h.length!==11&&h.length!==14){a.setError("cpf_cnpj",{type:"manual",message:"CPF/CNPJ é obrigatório para pagamento online."}),N.error("Por favor, preencha o CPF/CNPJ corretamente.");return}}if(Y){const d=o.change_for;if(d!=null&&d<i){N.error(`O valor do troco (R$ ${d.toFixed(2).replace(".",",")}) deve ser maior ou igual ao total do pedido (R$ ${i.toFixed(2).replace(".",",")}).`);return}}Be.mutate(o)},Mr=o=>{Object.keys(o).length>0&&N.error("Por favor, preencha todos os campos obrigatórios e corrija os erros.")};if(u.length===0&&!j&&!ie)return e.jsx("div",{className:"flex h-screen items-center justify-center",children:"Redirecionando..."});if(Fr||ie)return e.jsx(oo,{});if(Ir)return e.jsx("div",{className:"container mx-auto p-4 max-w-6xl",children:e.jsxs(oe,{variant:"destructive",children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx(se,{children:"Erro de Conexão"}),e.jsx(ae,{children:Me instanceof Error?Me.message:"Não foi possível carregar os dados."})]})});const we=Be.isPending||j||_,qr=!z||!y&&c>=0,_e=!z||S!==null&&F!==null,De=!we&&qr&&_e;return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b bg-card sticky top-0 z-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 max-w-6xl flex items-center",children:[e.jsx(Ur,{to:"/menu",children:e.jsx(re,{variant:"ghost",size:"icon",className:"mr-4",children:e.jsx(fo,{className:"h-5 w-5"})})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Finalizar Pedido"})]})}),e.jsx("div",{children:e.jsx(Go,{})}),e.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-6xl pb-24 lg:pb-8",children:[" ",e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsx(uo,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(Or,Mr),className:"space-y-6",children:[e.jsxs(de,{children:[e.jsx(ue,{children:e.jsx(me,{className:"text-xl",children:"1. Seus Dados"})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsx(I,{control:a.control,name:"name",render:({field:o})=>e.jsxs(C,{children:[e.jsx(P,{children:"Nome Completo *"}),e.jsx(O,{placeholder:"Seu nome",...o}),e.jsx(k,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(I,{control:a.control,name:"phone",render:({field:o})=>e.jsxs(C,{children:[e.jsx(P,{children:"Telefone *"}),e.jsx(xr,{...o}),e.jsx(k,{})]})}),e.jsx(I,{control:a.control,name:"email",render:({field:o})=>e.jsxs(C,{children:[e.jsx(P,{children:"Email (Opcional)"}),e.jsx(O,{placeholder:"seu@email.com",...o}),e.jsx(k,{})]})})]})]})]}),e.jsxs(de,{children:[e.jsx(ue,{children:e.jsx(me,{className:"text-xl",children:"2. Entrega"})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsx(I,{control:a.control,name:"delivery_option",render:({field:o})=>e.jsxs(C,{className:"space-y-3",children:[e.jsx(X,{children:e.jsxs(Se,{onValueChange:o.onChange,defaultValue:o.value,className:"flex flex-col space-y-1",children:[e.jsxs(C,{className:"flex items-center space-x-3 space-y-0 border p-4 rounded-lg cursor-pointer",children:[e.jsx(X,{children:e.jsx(he,{value:"delivery"})}),e.jsx(Je,{className:"h-5 w-5 text-primary"}),e.jsxs(P,{className:ne("font-normal flex-1 cursor-pointer"),children:["Delivery",D===!1&&e.jsx("span",{className:"block text-xs text-muted-foreground",children:" (Taxa de entrega desativada, entrega gratuita)"})]})]}),e.jsxs(C,{className:"flex items-center space-x-3 space-y-0 border p-4 rounded-lg cursor-pointer",children:[e.jsx(X,{children:e.jsx(he,{value:"pickup"})}),e.jsx(rr,{className:"h-5 w-5 text-primary"}),e.jsx(P,{className:"font-normal flex-1 cursor-pointer",children:"Retirada no Local"})]})]})}),e.jsx(k,{})]})}),z&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"})," Endereço de Entrega *"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(re,{type:"button",variant:"outline",size:"sm",onClick:o=>{o.preventDefault(),Tr()},disabled:_,children:[e.jsx(bo,{className:"h-4 w-4 mr-2"})," Salvar Endereço"]}),e.jsxs(re,{type:"button",variant:"outline",size:"sm",onClick:Ar,children:[e.jsx(vo,{className:"h-4 w-4 mr-2"})," Limpar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(I,{control:a.control,name:"street",render:({field:o})=>e.jsxs(C,{className:"col-span-2",children:[e.jsx(P,{children:"Rua *"}),e.jsx(O,{...o}),e.jsx(k,{})]})}),e.jsx(I,{control:a.control,name:"number",render:({field:o})=>e.jsxs(C,{className:"col-span-1",children:[e.jsx(P,{children:"Número *"}),e.jsx(O,{...o}),e.jsx(k,{})]})})]}),e.jsx(I,{control:a.control,name:"complement",render:({field:o})=>e.jsxs(C,{children:[e.jsx(P,{children:"Complemento (Opcional)"}),e.jsx(O,{placeholder:"Apto, Bloco, Casa, etc.",...o,disabled:!1}),e.jsx(k,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(I,{control:a.control,name:"neighborhood",render:({field:o})=>e.jsxs(C,{children:[e.jsx(P,{children:"Bairro *"}),e.jsx(O,{...o}),e.jsx(k,{})]})}),e.jsx(I,{control:a.control,name:"city",render:({field:o})=>e.jsxs(C,{children:[e.jsx(P,{children:"Cidade *"}),e.jsx(O,{...o}),e.jsx(k,{})]})})]}),e.jsx(I,{control:a.control,name:"zip_code",render:({field:o})=>e.jsxs(C,{children:[e.jsx(P,{children:"CEP *"}),e.jsx(mo,{...o}),e.jsx(k,{})]})}),z&&_e&&e.jsx("div",{children:e.jsx(po,{mapKey:Vr,markerPosition:Lr,onLocationChange:$r,updateAddressFields:Ne,restaurant:p})}),_&&D!==!1&&e.jsxs(oe,{children:[e.jsx(Pe,{className:"h-4 w-4 animate-spin"}),e.jsx(se,{children:"Calculando Taxa..."}),e.jsx(ae,{children:"Aguarde enquanto calculamos a taxa de entrega para o seu endereço."})]}),y&&D!==!1&&e.jsxs(oe,{variant:"destructive",children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx(se,{children:"Erro de Entrega"}),e.jsx(ae,{children:y})]}),c>0&&!_&&D!==!1&&e.jsxs(oe,{className:"mt-4",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(se,{children:"Taxa de Entrega Aplicada"}),e.jsxs(ae,{children:["Taxa: ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c)]})]}),z&&!_e&&e.jsxs(oe,{variant:"destructive",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx(se,{children:"Localização Obrigatória"}),e.jsx(ae,{children:'Clique em "Salvar Endereço" para confirmar a localização no mapa e calcular a taxa de entrega.'})]})]})]})]}),e.jsxs(de,{children:[e.jsx(ue,{children:e.jsx(me,{className:"text-xl",children:"3. Pagamento"})}),e.jsxs(pe,{className:"space-y-4",children:[e.jsx(I,{control:a.control,name:"payment_method_id",render:({field:o})=>e.jsxs(C,{className:"space-y-3",children:[e.jsx(X,{children:e.jsx(Se,{onValueChange:d=>{o.onChange(d);const h=Q.find(b=>b.id===d);(h==null?void 0:h.name)!=="Dinheiro"&&a.setValue("change_for",null,{shouldValidate:!0}),(h==null?void 0:h.name)==="Pagamento online: Pix/Cartão"?a.trigger("cpf_cnpj"):a.clearErrors("cpf_cnpj")},defaultValue:o.value,className:"flex flex-col space-y-2",children:Q.map(d=>{const h=Wo(d.icon||"Store");return e.jsxs(C,{className:"flex items-center space-x-3 space-y-0 border p-4 rounded-lg cursor-pointer",children:[e.jsx(X,{children:e.jsx(he,{value:d.id})}),e.jsx(h,{className:"h-5 w-5 text-primary"}),e.jsxs(P,{className:"font-normal flex-1 cursor-pointer",children:[d.name,e.jsx("span",{className:"block text-xs text-muted-foreground",children:d.description})]})]},d.id)})})}),e.jsx(k,{})]})}),J&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(or,{className:"h-4 w-4"})," Detalhes Adicionais"]}),e.jsx(I,{control:a.control,name:"cpf_cnpj",render:({field:o})=>e.jsxs(C,{children:[e.jsx(P,{children:"CPF/CNPJ * (obrigatório para pagamento online)"}),e.jsx(X,{children:e.jsx(yr,{...o})}),e.jsx(k,{})]})})]}),Y&&e.jsx(I,{control:a.control,name:"change_for",render:({field:o})=>e.jsxs(C,{children:[e.jsx(P,{children:"Precisa de troco para quanto? (R$)"}),e.jsx(O,{type:"number",step:"0.01",placeholder:new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2}).format(i),...o,value:o.value===null||o.value===void 0?"":String(o.value),onChange:d=>{const h=d.target.value;o.onChange(h===""?null:h)}}),e.jsx(k,{})]})}),e.jsx(I,{control:a.control,name:"notes",render:({field:o})=>e.jsxs(C,{children:[e.jsx(P,{children:"Observações do Pedido (Opcional)"}),e.jsx(co,{placeholder:"Ex: Tocar a campainha duas vezes...",...o,rows:2}),e.jsx(k,{})]})})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card p-4 border-t shadow-2xl lg:hidden z-50",children:e.jsx(re,{type:"submit",className:"w-full h-12 text-lg",disabled:!De,children:we?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"mr-2 h-4 w-4 animate-spin"})," Processando..."]}):`Finalizar Pedido - ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i)}`})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(re,{type:"submit",className:"w-full h-12 text-lg",disabled:!De,children:we?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"mr-2 h-4 w-4 animate-spin"})," Processando..."]}):`Finalizar Pedido - ${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i)}`})})]})})}),e.jsx("div",{className:"lg:col-span-1 hidden lg:block",children:e.jsx(Xo,{...t})})]})]})]})};export{Es as default};
