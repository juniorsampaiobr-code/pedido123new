import{j as e}from"./tanstack-D8i8yNxB.js";import{u as E,r}from"./vendor-Dl0Wzy4_.js";import{L as F}from"./Logo-DlQMAEcL.js";import{B as N}from"./button-Baxc7c9B.js";import{L as o,I as n}from"./label-VrTNOfkF.js";import{C as L,b as q,c as P,d as z,a as I}from"./card-DDNReOPX.js";import{u as c}from"./index-C848GKn6.js";import{s as i}from"./client-BmrnLCXS.js";import"./package-Bv8VGfpe.js";import"./supabase-A1WgB1xz.js";const G=()=>{const u=E(),[h,p]=r.useState(!1),[l,v]=r.useState(!1),[m,C]=r.useState(""),[d,b]=r.useState(""),[f,y]=r.useState(""),[x,S]=r.useState(""),[U,g]=r.useState(null),[A,j]=r.useState(null);r.useEffect(()=>{const{data:{subscription:s}}=i.auth.onAuthStateChange((a,t)=>{j(t),g((t==null?void 0:t.user)??null),t!=null&&t.user&&u("/dashboard")});return i.auth.getSession().then(({data:{session:a}})=>{j(a),g((a==null?void 0:a.user)??null),a!=null&&a.user&&u("/dashboard")}),()=>s.unsubscribe()},[u]);const w=async s=>{s.preventDefault(),p(!0);try{if(l){const{data:a,error:t}=await i.auth.signUp({email:m,password:d,options:{data:{full_name:f,phone:x}}});if(t)throw t;a.session?c.success("Conta criada e login efetuado com sucesso!"):c.success("Conta criada! Verifique seu email para confirmar.")}else{const{error:a}=await i.auth.signInWithPassword({email:m,password:d});if(a)throw a;c.success("Login realizado com sucesso!")}}catch(a){a.message.includes("Email not confirmed")?c.error("Por favor, verifique seu e-mail para confirmar sua conta antes de fazer login."):c.error(a.message||"Erro ao processar autenticação")}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"mb-8 text-center",children:e.jsx(F,{className:"justify-center mb-4"})}),e.jsxs(L,{className:"shadow-xl border-2",children:[e.jsxs(q,{className:"space-y-1",children:[e.jsx(P,{className:"text-2xl font-bold text-center",children:l?"Crie sua conta":"Acesse sua conta"}),e.jsx(z,{className:"text-center",children:l?"Preencha os campos para começar":"Utilize seu email e senha para fazer login"})]}),e.jsxs(I,{className:"space-y-4",children:[e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"fullName",children:"Nome Completo"}),e.jsx(n,{id:"fullName",type:"text",placeholder:"Seu nome completo",value:f,onChange:s=>y(s.target.value),required:!0,className:"h-12"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"phone",children:"Telefone"}),e.jsx(n,{id:"phone",type:"tel",placeholder:"(99) 99999-9999",value:x,onChange:s=>S(s.target.value),required:!0,className:"h-12"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx(n,{id:"email",type:"email",placeholder:"seu@email.com",value:m,onChange:s=>C(s.target.value),required:!0,className:"h-12"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"password",children:"Senha"}),e.jsx(n,{id:"password",type:"password",placeholder:"••••••••",value:d,onChange:s=>b(s.target.value),required:!0,className:"h-12"})]}),e.jsx(N,{type:"submit",className:"w-full",size:"lg",disabled:h,children:h?"Processando...":l?"Criar conta":"Entrar"})]}),e.jsx("div",{className:"text-center",children:e.jsx(N,{variant:"link",type:"button",className:"p-0 h-auto",onClick:()=>v(!l),children:l?"Já tem uma conta? Faça login":"Não tem uma conta? Crie uma agora"})})]})]})]})})};export{G as default};
