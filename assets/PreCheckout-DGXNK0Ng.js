import{j as o,u as d}from"./tanstack-C7aOFagJ.js";import{h as m,k as h,r as p}from"./vendor-DjsPZZVP.js";import{av as g,h as c,s as l}from"./index-abG_yP0q.js";import"./supabase-BAEEEeUB.js";const I=()=>d({queryKey:["authStatus"],queryFn:async()=>{const{data:{session:t}}=await l.auth.getSession();return(t==null?void 0:t.user)||null},staleTime:1/0}),y=()=>d({queryKey:["activeRestaurantId"],queryFn:async()=>{const{data:t,error:e}=await l.from("restaurants").select("id").eq("is_active",!0).order("created_at",{ascending:!1}).limit(1).single();return e&&e.code!=="PGRST116"?(console.error("Error fetching active restaurant ID:",e),null):(t==null?void 0:t.id)||null},staleTime:1/0}),q=()=>{const t=m(),[e]=h(),r=e.get("restaurantId"),{data:i,isLoading:s}=I(),{data:f,isLoading:a}=y(),{totalItems:n}=g(),u=r||f;return p.useEffect(()=>{if(n===0){u?t(`/menu/${u}`,{replace:!0}):a||t("/",{replace:!0});return}!s&&!a&&(i?t("/checkout",{replace:!0}):t("/auth",{state:{from:"/checkout",restaurantId:r},replace:!0}))},[n,i,s,a,t,u,r]),s||a||n===0?o.jsx(c,{}):o.jsx(c,{})};export{q as default};
