import{j as n,u as o}from"./tanstack-C7aOFagJ.js";import{h as l,r as f}from"./vendor-DjsPZZVP.js";import{av as d,h as i,s as c}from"./index-CzF2IRzB.js";import"./supabase-BAEEEeUB.js";const m=()=>o({queryKey:["authStatus"],queryFn:async()=>{const{data:{session:e}}=await c.auth.getSession();return(e==null?void 0:e.user)||null},staleTime:1/0}),p=()=>o({queryKey:["activeRestaurantId"],queryFn:async()=>{const{data:e,error:t}=await c.from("restaurants").select("id").eq("is_active",!0).order("created_at",{ascending:!1}).limit(1).single();return t&&t.code!=="PGRST116"?(console.error("Error fetching active restaurant ID:",t),null):(e==null?void 0:e.id)||null},staleTime:1/0}),v=()=>{const e=l(),{data:t,isLoading:a}=m(),{data:s,isLoading:r}=p(),{totalItems:u}=d();return f.useEffect(()=>{if(u===0){s?e(`/menu/${s}`,{replace:!0}):r||e("/",{replace:!0});return}!a&&!r&&(t?e("/checkout",{replace:!0}):e("/auth",{state:{from:"/checkout"},replace:!0}))},[u,t,a,r,e,s]),a||r||u===0?n.jsx(i,{}):n.jsx(i,{})};export{v as default};
