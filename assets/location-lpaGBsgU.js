import{c as d,b as h,u as m}from"./index-CZXX2Rfq.js";import{j as p}from"./tanstack-D8i8yNxB.js";import{R as u}from"./vendor-Dl0Wzy4_.js";import{I as f}from"./label-DgIF2_Pe.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=d("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),g=t=>{let e=t.replace(/\D/g,"");return e.length>8&&(e=e.slice(0,8)),e.length>5&&(e=`${e.slice(0,5)}-${e.slice(5)}`),e},M=u.forwardRef(({className:t,value:e,onChange:a,...n},r)=>{const o=s=>{const c=s.target.value,i=g(c),l={...s,target:{...s.target,value:i}};a(l)};return p.jsx(f,{ref:r,type:"tel",className:h("w-full",t),placeholder:"00000-000",value:e,onChange:o,maxLength:9,...n})});M.displayName="ZipCodeInput";const y=(t,e,a,n)=>{const o=(a-t)*(Math.PI/180),s=(n-e)*(Math.PI/180),c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t*(Math.PI/180))*Math.cos(a*(Math.PI/180))*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},R=async t=>{const e=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t)}&limit=1`;try{const a=await fetch(e);if(!a.ok)throw new Error("Falha na API de geocodificação.");const n=await a.json();if(n&&n.length>0){const r=parseFloat(n[0].lat),o=parseFloat(n[0].lon);if(!isNaN(r)&&!isNaN(o))return[r,o]}return console.warn("Geocodificação falhou para o endereço:",t,"Usando coordenadas padrão."),null}catch(a){return console.error("Erro durante a geocodificação:",a),m.error("Erro ao buscar coordenadas do endereço. Verifique o endereço."),null}},j=(t,e,a)=>{const n=y(e[0],e[1],t[0],t[1]),r=a.find(o=>n<=o.max_distance_km);if(r){const o=r.delivery_fee||0,s=r.min_delivery_time_minutes||0,c=s+15;return{fee:parseFloat(o.toFixed(2)),minTime:s,maxTime:c}}return null};export{F as S,M as Z,j as c,R as g};
