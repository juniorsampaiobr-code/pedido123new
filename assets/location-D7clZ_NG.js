const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MapComponent-x9m_VUCA.js","./tanstack-Ch7Ewlpa.js","./vendor-CCvq-0xx.js","./index-Bs6YCNwK.js","./supabase-t-NbcSY6.js","./index-UO8zZIA1.css"])))=>i.map(i=>d[i]);
import{j as l}from"./tanstack-Ch7Ewlpa.js";import{R as h,r as p}from"./vendor-CCvq-0xx.js";import{I as f}from"./label-V3YWfDWF.js";import{a as g,b as A,u as m}from"./index-Bs6YCNwK.js";import{_ as M}from"./supabase-t-NbcSY6.js";const v=t=>{let o=t.replace(/\D/g,"");return o.length>8&&(o=o.slice(0,8)),o.length>5&&(o=`${o.slice(0,5)}-${o.slice(5)}`),o},x=h.forwardRef(({className:t,value:o,onChange:r,...i},a)=>{const s=e=>{const n=e.target.value,c=v(n),d={...e,target:{...e.target,value:c}};r(d)};return l.jsx(f,{ref:a,type:"tel",className:g("w-full",t),placeholder:"00000-000",value:o,onChange:s,maxLength:9,...i})});x.displayName="ZipCodeInput";const y=p.lazy(()=>M(()=>import("./MapComponent-x9m_VUCA.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(t=>({default:t.default}))),E=t=>l.jsx(p.Suspense,{fallback:l.jsx(A,{}),children:l.jsx(y,{...t})}),L=(t,o,r,i)=>{const s=(r-t)*(Math.PI/180),e=(i-o)*(Math.PI/180),n=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t*(Math.PI/180))*Math.cos(r*(Math.PI/180))*Math.sin(e/2)*Math.sin(e/2);return 6371*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)))},F=async(t,o)=>{const r=t.replace(/\s+/g," ").trim(),i=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r)}&limit=1&addressdetails=1`,a=new AbortController,s=setTimeout(()=>a.abort(),1e4);try{console.log("LOG: geocodeAddress - URL da API:",i);const e=await fetch(i,{signal:a.signal,headers:{"User-Agent":"Pedido123-App/1.0 (https://juniorsampaiobr-code.github.io/pedido123new/)"}});if(!e.ok)return console.error("LOG: geocodeAddress - Resposta da API não OK. Status:",e.status),null;const n=await e.json();if(n&&Array.isArray(n)&&n.length>0){const c=n[0],d=parseFloat(c.lat),u=parseFloat(c.lon);if(Number.isFinite(d)&&Number.isFinite(u))return console.log("LOG: geocodeAddress - Geocodificação bem-sucedida. Coordenadas:",[d,u]),{lat:d,lng:u}}return console.warn("LOG: geocodeAddress - Falha. Nenhum resultado encontrado ou coordenadas inválidas para:",r),m.error("Não foi possível encontrar o endereço. Verifique todos os campos e tente novamente."),null}catch(e){return e instanceof Error&&e.name==="AbortError"?(console.error("LOG: geocodeAddress - Timeout na requisição (10s). Endereço:",r),m.error("A requisição para encontrar o endereço demorou muito. Tente novamente.")):(console.error("LOG: geocodeAddress - Erro durante a requisição:",e),m.error("Ocorreu um erro ao buscar o endereço. Tente novamente.")),null}finally{clearTimeout(s)}},O=(t,o,r)=>{const i=L(o[0],o[1],t[0],t[1]),a=r.find(s=>i<=s.max_distance_km);if(a){const s=a.delivery_fee||0,e=a.min_delivery_time_minutes||0,n=e+15;return{fee:parseFloat(s.toFixed(2)),minTime:e,maxTime:n}}return null};export{E as L,x as Z,O as c,F as g};
