import{j as e,u as Z,a as ee,b as be}from"./tanstack-DVJTcRV8.js";import{a as ae,L as je,r as o,u as ve,O as Se}from"./vendor-C5yldPn0.js";import{s as b}from"./client-DM5R7jeC.js";import{L as Ne}from"./Logo-DbC6IFZn.js";import{c as S,a as A,u as c,L as re,d as I,T as L,r as R,s as q}from"./index-8CL0dTvz.js";import{P as we}from"./package-BDEB7bYK.js";import{S as se}from"./shopping-cart-Bj4tRBVQ.js";import{C as Ce,T as ke}from"./truck-CZ39DZyQ.js";import{C as Ee}from"./credit-card-Jj9bd1ZB.js";import{S as Pe}from"./settings-DgB4e2F9.js";import{c as Ae,B as w}from"./button-BX6zCSRs.js";import{A as Te,g as De,h as Me,i as _e,j as Ie,k as Le,m as Re,O as oe,C as te,o as qe,X as Oe,T as ne,p as ie,q as ze,r as Fe,s as Ve,D as Ue,a as He,b as Ge,c as Ke,d as Qe,e as $e}from"./alert-dialog-C4r8hXqJ.js";import{V as le}from"./volume-2-B6FLIGXm.js";import{S as We}from"./use-sound-BZ_EAx1q.js";import{o as Xe,s as H,u as Be,t as Je}from"./types-vy7WVTmh.js";import{F as Ye,a as G,b as K,e as Q,c as $,d as W}from"./form-CWylhqSa.js";import{L as Ze,I as X}from"./label-B_vm9_V8.js";import{P as ea}from"./PhoneInput-DG850oj8.js";import{S as P}from"./skeleton-CttmANMB.js";import{U as de}from"./user-BLFaAwLs.js";import{A as B,a as J,b as Y}from"./alert-DR_u1Pem.js";import"./supabase-SdGmRSUE.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=S("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=S("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=S("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=S("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=S("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=S("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=S("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),ia=[{href:"/dashboard",label:"Dashboard",icon:aa},{href:"/products",label:"Produtos",icon:we},{href:"/orders",label:"Pedidos",icon:se},{href:"/cashier",label:"Caixa",icon:na},{href:"/hours",label:"Hor√°rios",icon:Ce},{href:"/payments",label:"Pagamentos",icon:Ee},{href:"/delivery",label:"Taxa de Entrega",icon:ke},{href:"/settings",label:"Configura√ß√µes",icon:Pe}],ce=()=>{const a=ae();return e.jsxs("aside",{className:"w-64 flex-shrink-0 border-r bg-card h-screen sticky top-0 flex-col flex",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx(Ne,{})}),e.jsx("nav",{className:"flex-grow p-4",children:e.jsx("ul",{children:ia.map(r=>e.jsx("li",{children:e.jsxs(je,{to:r.href,className:A("flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors",a.pathname===r.href?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[e.jsx(r.icon,{className:"h-4 w-4"}),r.label]})},r.href))})})]})},la=({isOpen:a,onEnable:r})=>e.jsx(Te,{open:a,children:e.jsxs(De,{children:[e.jsxs(Me,{children:[e.jsxs(_e,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-6 w-6 text-primary"}),"Ativar Notifica√ß√µes Sonoras?"]}),e.jsxs(Ie,{children:["Para garantir que voc√™ n√£o perca nenhum novo pedido, precisamos da sua permiss√£o para tocar um som de notifica√ß√£o.",e.jsx("br",{}),e.jsx("br",{}),'Ao clicar em "Ativar", um som de teste ser√° reproduzido.']})]}),e.jsx(Le,{children:e.jsx(Re,{onClick:r,className:"w-full",children:"Sim, ativar som"})})]})}),da=Fe,ca=Ve,ua=ze,ue=o.forwardRef(({className:a,...r},s)=>e.jsx(oe,{className:A("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:s}));ue.displayName=oe.displayName;const ma=Ae("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),me=o.forwardRef(({side:a="right",className:r,children:s,...p},x)=>e.jsxs(ua,{children:[e.jsx(ue,{}),e.jsxs(te,{ref:x,className:A(ma({side:a}),r),...p,children:[s,e.jsxs(qe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));me.displayName=te.displayName;const ha=o.forwardRef(({className:a,...r},s)=>e.jsx(ne,{ref:s,className:A("text-lg font-semibold text-foreground",a),...r}));ha.displayName=ne.displayName;const fa=o.forwardRef(({className:a,...r},s)=>e.jsx(ie,{ref:s,className:A("text-sm text-muted-foreground",a),...r}));fa.displayName=ie.displayName;const pa=()=>e.jsxs(da,{children:[e.jsx(ca,{asChild:!0,children:e.jsx(w,{variant:"outline",size:"icon",children:e.jsx(sa,{className:"h-4 w-4"})})}),e.jsx(me,{side:"left",className:"p-0 w-64",children:e.jsx(ce,{})})]}),xa=(a=1024)=>{const[r,s]=o.useState(!1);return o.useEffect(()=>{const p=()=>{s(window.innerWidth<a)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[a]),r},ga=a=>a.replace(/\D/g,""),ya=Xe({full_name:H().min(1,"Nome √© obrigat√≥rio."),phone:H().min(1,"Telefone √© obrigat√≥rio.").transform(ga).refine(a=>a.length>=10,{message:"O telefone deve ter pelo menos 10 d√≠gitos (incluindo DDD)."})}),ba=async a=>{const{data:r,error:s}=await b.from("profiles").select("*").eq("id",a).limit(1).single();if(s&&s.code!=="PGRST116")throw new Error(`Erro ao buscar perfil: ${s.message}`);return r||{id:a,full_name:null,phone:null,avatar_url:null,created_at:null,updated_at:null}},ja=({isOpen:a,onClose:r,userId:s})=>{var l;const p=Z(),{data:x,isLoading:g}=ee({queryKey:["adminProfile",s],queryFn:()=>ba(s),enabled:!!s&&a,staleTime:0}),C=(l=b.auth.currentUser)==null?void 0:l.email,d=Be({resolver:Je(ya),defaultValues:{full_name:"",phone:""}});o.useEffect(()=>{x&&d.reset({full_name:x.full_name||"",phone:x.phone||""})},[x,d]);const j=be({mutationFn:async u=>{if(!s)throw new Error("ID do usu√°rio n√£o encontrado.");const D={full_name:u.full_name,phone:u.phone},{error:k}=await b.from("profiles").upsert({...D,id:s},{onConflict:"id"});if(k)throw new Error(k.message)},onSuccess:()=>{c.success("Perfil atualizado com sucesso!"),p.invalidateQueries({queryKey:["adminProfile"]}),r()},onError:u=>{c.error(`Erro ao atualizar perfil: ${u.message}`)}}),i=u=>{j.mutate(u)};return e.jsx(Ue,{open:a,onOpenChange:r,children:e.jsxs(He,{className:"sm:max-w-[425px]",children:[e.jsxs(Ge,{children:[e.jsxs(Ke,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-primary"}),"Meu Perfil (Admin)"]}),e.jsx(Qe,{children:"Atualize seus dados de contato."})]}),g?e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsx(P,{className:"h-4 w-1/3"}),e.jsx(P,{className:"h-10 w-full"}),e.jsx(P,{className:"h-4 w-1/3"}),e.jsx(P,{className:"h-10 w-full"}),e.jsx(P,{className:"h-10 w-full mt-6"})]}):e.jsx(Ye,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(i),className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ze,{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(ra,{className:"h-4 w-4"})," Email"]}),e.jsx(X,{value:C||"N/A",disabled:!0,className:"bg-muted/50"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"O email n√£o pode ser alterado aqui."})]}),e.jsx(G,{control:d.control,name:"full_name",render:({field:u})=>e.jsxs(K,{children:[e.jsx(Q,{children:"Nome Completo *"}),e.jsx($,{children:e.jsx(X,{placeholder:"Seu nome",...u})}),e.jsx(W,{})]})}),e.jsx(G,{control:d.control,name:"phone",render:({field:u})=>e.jsxs(K,{children:[e.jsx(Q,{children:"Telefone *"}),e.jsx($,{children:e.jsx(ea,{...u})}),e.jsx(W,{})]})}),e.jsx($e,{className:"pt-4",children:e.jsxs(w,{type:"submit",disabled:j.isPending,children:[j.isPending?e.jsx(re,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Salvar Altera√ß√µes"]})})]})})]})})},va=[{href:"/dashboard",label:"Dashboard"},{href:"/products",label:"Produtos"},{href:"/orders",label:"Pedidos"},{href:"/cashier",label:"Caixa"},{href:"/hours",label:"Hor√°rios"},{href:"/payments",label:"Pagamentos"},{href:"/delivery",label:"Taxa de Entrega"},{href:"/settings",label:"Configura√ß√µes"}],Sa=a=>{const r=va.find(s=>s.href===a);return r?r.label:"Dashboard"},Na=async a=>{const{data:r,error:s}=await b.from("user_roles").select("role, restaurant_id").eq("user_id",a).in("role",["admin","moderator"]).limit(1).single();return s&&s.code!=="PGRST116"?(console.error("Error checking role and restaurant:",s),{role:null,restaurantId:null}):r?{role:r.role,restaurantId:r.restaurant_id}:{role:null,restaurantId:null}},wa=()=>{const a=ve(),r=ae(),s=Z(),[p,x]=o.useState(null),[g,C]=o.useState(void 0),[d,j]=o.useState(null),i=o.useRef(null),[l,u]=o.useState("loading"),[D,k]=o.useState(!1),[E,M]=o.useState(null);xa();const[he,z]=o.useState(!1),[m,y]=o.useState(()=>localStorage.getItem("soundNotificationStatus")||"disabled");o.useEffect(()=>{localStorage.setItem("soundNotificationStatus",m)},[m]);const{data:h,isLoading:fe,isError:pe,error:F}=ee({queryKey:["dashboardRestaurant",d],queryFn:async()=>{if(!d)throw new Error("Restaurant ID not found for user.");const{data:t,error:f}=await b.from("restaurants").select("*").eq("id",d).single();if(f)throw new Error(f.message);return t},enabled:!!p&&(g==="admin"||g==="moderator")&&!!d,staleTime:1/0});o.useEffect(()=>{const t=async n=>{if(!(n!=null&&n.user)){x(null),C(null),j(null),a("/admin-auth",{replace:!0});return}const{role:v,restaurantId:U}=await Na(n.user.id);x(n.user),C(v),j(U),v!=="admin"&&v!=="moderator"&&(c.error("Acesso restrito.",{description:"Voc√™ n√£o tem permiss√£o para acessar o painel. Redirecionando para o login de administrador.",duration:5e3}),a("/admin-auth",{replace:!0})),(v==="admin"||v==="moderator")&&!U&&console.error("Admin logged in but missing restaurant ID.")},{data:{subscription:f}}=b.auth.onAuthStateChange((n,v)=>{n==="SIGNED_OUT"?(x(null),C(null),j(null),a("/admin-auth",{replace:!0})):t(v)});return b.auth.getSession().then(({data:{session:n}})=>{t(n)}),()=>f.unsubscribe()},[a]),o.useEffect(()=>{var t;h!=null&&h.notification_sound_url?((t=i.current)==null?void 0:t.src)!==h.notification_sound_url&&u("loading"):u("error")},[h==null?void 0:h.notification_sound_url]),o.useEffect(()=>{!localStorage.getItem("hasSeenSoundPermissionModal")&&m!=="enabled"&&l==="ready"&&k(!0)},[m,l]);const N=o.useCallback(()=>{i.current&&(i.current.pause(),i.current.loop=!1,M(null))},[]),V=o.useCallback(t=>{if(m==="enabled"&&i.current&&l==="ready"){if(E)return;M(t),i.current.loop=!0,i.current.play().catch(f=>{console.error("Erro na reprodu√ß√£o autom√°tica de √°udio:",f),M(null),c.warning("N√£o foi poss√≠vel tocar o som automaticamente.",{description:"Interaja com a p√°gina para permitir a reprodu√ß√£o de som."})})}},[m,l,E]);o.useEffect(()=>{if(g!=="admin"&&g!=="moderator"||!d)return;const t=b.channel("new-orders-toast").on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},f=>{s.invalidateQueries({queryKey:["orders"]});const n=f.new;n.status==="pending"&&n.id&&n.restaurant_id===d&&(c.info("üîî Novo pedido recebido!",{description:`Pedido #${n.id.slice(-4)} est√° aguardando confirma√ß√£o.`,duration:15e3}),V(n.id))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders"},f=>{s.invalidateQueries({queryKey:["orders"]});const n=f.new;n.id===E&&N(),n.status==="pending"&&n.id&&f.old.status==="pending_payment"&&n.restaurant_id===d&&c.success("‚úÖ Pagamento Confirmado!",{description:`Pedido #${n.id.slice(-4)} foi pago e est√° pronto para preparo.`,duration:5e3})}).subscribe();return()=>{b.removeChannel(t)}},[s,V,N,E,g,d]);const _=o.useCallback(()=>{if(m==="enabled"&&i.current&&l==="ready"){N(),i.current.loop=!1,i.current.currentTime=0;const t=i.current.play();t!==void 0&&t.then(()=>{console.log("Som de teste tocado com sucesso")}).catch(f=>{console.error("Erro ao tocar som de teste:",f),y("error"),c.error("N√£o foi poss√≠vel tocar o som de teste.",{description:"Seu navegador pode ter bloqueado a reprodu√ß√£o. Interaja com a p√°gina e tente novamente."})})}else l==="ready"?(y("enabled"),setTimeout(()=>_(),100)):(c.error("Som de notifica√ß√£o n√£o est√° pronto ou configurado.",{description:"Verifique se a URL do som est√° correta nas Configura√ß√µes."}),y("error"))},[m,l,N]),xe=async()=>{if(l!=="ready"||!i.current){c.error("O arquivo de som ainda n√£o est√° pronto. Tente novamente em um momento.");return}try{i.current.currentTime=0,await i.current.play(),y("enabled"),c.success("Notifica√ß√µes sonoras ativadas!"),localStorage.setItem("hasSeenSoundPermissionModal","true")}catch(t){console.error("Audio activation failed from modal:",t),c.error("Falha ao ativar o som.",{description:"Seu navegador pode ter bloqueado a reprodu√ß√£o. Por favor, tente ativar manualmente no √≠cone do cabe√ßalho."}),y("error")}finally{k(!1)}},ge=async()=>{if(m==="enabled"){N(),y("disabled"),c.info("Notifica√ß√µes sonoras desativadas.");return}if(l!=="ready"||!i.current){c.error("Som de notifica√ß√£o n√£o est√° pronto ou configurado."),y("error");return}try{i.current.currentTime=0,await i.current.play(),y("enabled"),c.success("Notifica√ß√µes sonoras ativadas!",{description:"Voc√™ ouviu o som de teste."})}catch(t){console.error("Audio activation failed:",t),c.error("Falha ao ativar o som.",{description:"Seu navegador pode ter bloqueado. Clique na p√°gina e tente novamente."}),y("error")}},ye=async()=>{await b.auth.signOut()};if(g===void 0||fe)return e.jsx(I,{});if(g!=="admin"&&g!=="moderator")return e.jsx(I,{});if(!d)return e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsxs(B,{variant:"destructive",className:"max-w-md",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx(J,{children:"Erro de Configura√ß√£o"}),e.jsx(Y,{children:"Sua conta n√£o est√° vinculada a um restaurante. Por favor, tente fazer login novamente. Se o erro persistir, entre em contato com o suporte."})]})});if(pe)return e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsxs(B,{variant:"destructive",className:"max-w-md",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx(J,{children:"Erro ao Carregar Restaurante"}),e.jsx(Y,{children:F instanceof Error?F.message:"N√£o foi poss√≠vel carregar os dados do seu restaurante."})]})});if(!h)return e.jsx(I,{});const T=l!=="ready";return e.jsxs(We.Provider,{value:{playSound:_,stopSoundLoop:N,soundStatus:m,loopingOrderId:E},children:[e.jsx(la,{isOpen:D,onEnable:xe}),e.jsx(ja,{isOpen:he,onClose:()=>z(!1),userId:(p==null?void 0:p.id)||null}),e.jsxs("div",{className:"flex min-h-screen bg-muted/40",children:[e.jsx("div",{className:"hidden lg:flex",children:e.jsx(ce,{})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("header",{className:"border-b bg-background sticky top-0 z-40",children:e.jsxs("div",{className:"container max-w-none mx-auto px-4 sm:px-8 h-16 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"lg:hidden",children:e.jsx(pa,{})}),e.jsx(se,{className:"h-6 w-6 hidden sm:block"}),e.jsx("h1",{className:"text-xl font-semibold",children:Sa(r.pathname)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{children:[e.jsx(R,{asChild:!0,children:e.jsx(w,{variant:"outline",size:"icon",onClick:()=>z(!0),"aria-label":"Meu Perfil",children:e.jsx(de,{className:"h-4 w-4"})})}),e.jsx(q,{children:"Meu Perfil"})]}),e.jsxs(L,{children:[e.jsx(R,{asChild:!0,children:e.jsx(w,{variant:"outline",size:"sm",onClick:_,disabled:T,children:"Testar Som"})}),T&&e.jsx(q,{children:l==="loading"?"Carregando som...":"Som n√£o dispon√≠vel"})]}),e.jsxs(L,{children:[e.jsx(R,{asChild:!0,children:e.jsxs(w,{variant:"outline",size:"icon",onClick:ge,disabled:T,"aria-label":m==="enabled"?"Desativar som":"Ativar som",children:[l==="loading"&&e.jsx(re,{className:"h-4 w-4 animate-spin"}),l==="ready"&&m==="enabled"&&e.jsx(le,{className:"h-4 w-4 text-green-500"}),l==="ready"&&m==="disabled"&&e.jsx(ta,{className:"h-4 w-4"}),l==="error"&&e.jsx(O,{className:"h-4 w-4 text-destructive"})]})}),T&&e.jsx(q,{children:l==="loading"?"Carregando som...":"Som n√£o dispon√≠vel"})]}),e.jsx(w,{variant:"outline",onClick:ye,children:"Sair"})]})]})}),e.jsx(Se,{context:{restaurant:h,userRestaurantId:d}})]}),(h==null?void 0:h.notification_sound_url)&&e.jsx("audio",{ref:i,src:h.notification_sound_url,onCanPlayThrough:()=>{u("ready"),console.log("√Åudio carregado e pronto para tocar.")},onError:t=>{console.error("Erro ao carregar o √°udio:",t),c.error("Erro ao carregar o som de notifica√ß√£o.",{description:"Verifique o arquivo em Configura√ß√µes."}),u("error"),y("error")},className:"hidden"})]})]})},$a=o.memo(wa);export{$a as default};
