import{j as e}from"./tanstack-DXzASLyu.js";import{u as E,r as t}from"./vendor-YgypLURK.js";import{L as A}from"./Logo-B-xW5QzC.js";import{B as i}from"./button-DP4ALDeA.js";import{L as n,I as d}from"./label-DXwFgiHT.js";import{C as L,b as k,c as F,d as I,a as q}from"./card-C-CnIMNv.js";import{S as M}from"./separator-BRCASUWm.js";import{c as P,u as c}from"./index-DXHl_ahK.js";import{s as o}from"./client-lAKPhnc8.js";import"./package-CJ1WO16U.js";import"./supabase-Bm28tI2t.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=P("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]),K=()=>{const u=E(),[p,x]=t.useState(!1),[l,N]=t.useState(!1),[m,C]=t.useState(""),[h,y]=t.useState(""),[f,b]=t.useState(""),[g,w]=t.useState(""),[H,j]=t.useState(null),[B,v]=t.useState(null);t.useEffect(()=>{const{data:{subscription:a}}=o.auth.onAuthStateChange((s,r)=>{v(r),j((r==null?void 0:r.user)??null),r!=null&&r.user&&u("/dashboard")});return o.auth.getSession().then(({data:{session:s}})=>{v(s),j((s==null?void 0:s.user)??null),s!=null&&s.user&&u("/dashboard")}),()=>a.unsubscribe()},[u]);const S=async a=>{a.preventDefault(),x(!0);try{if(l){const{data:s,error:r}=await o.auth.signUp({email:m,password:h,options:{data:{full_name:f,phone:g}}});if(r)throw r;s.session?c.success("Conta criada e login efetuado com sucesso!"):c.success("Conta criada! Verifique seu email para confirmar.")}else{const{error:s}=await o.auth.signInWithPassword({email:m,password:h});if(s)throw s;c.success("Login realizado com sucesso!")}}catch(s){s.message.includes("Email not confirmed")?c.error("Por favor, verifique seu e-mail para confirmar sua conta antes de fazer login."):c.error(s.message||"Erro ao processar autenticação")}finally{x(!1)}},z=async()=>{try{const{error:a}=await o.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/dashboard`}});if(a)throw a}catch(a){c.error(a.message||"Erro ao fazer login com Google")}};return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"mb-8 text-center",children:e.jsx(A,{className:"justify-center mb-4"})}),e.jsxs(L,{className:"shadow-xl border-2",children:[e.jsxs(k,{className:"space-y-1",children:[e.jsx(F,{className:"text-2xl font-bold text-center",children:l?"Crie sua conta":"Acesse sua conta"}),e.jsx(I,{className:"text-center",children:l?"Preencha os campos para começar":"Utilize uma das opções para fazer login"})]}),e.jsxs(q,{className:"space-y-4",children:[e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"fullName",children:"Nome Completo"}),e.jsx(d,{id:"fullName",type:"text",placeholder:"Seu nome completo",value:f,onChange:a=>b(a.target.value),required:!0,className:"h-12"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"phone",children:"Telefone"}),e.jsx(d,{id:"phone",type:"tel",placeholder:"(99) 99999-9999",value:g,onChange:a=>w(a.target.value),required:!0,className:"h-12"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"email",children:"Email"}),e.jsx(d,{id:"email",type:"email",placeholder:"seu@email.com",value:m,onChange:a=>C(a.target.value),required:!0,className:"h-12"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"password",children:"Senha"}),e.jsx(d,{id:"password",type:"password",placeholder:"••••••••",value:h,onChange:a=>y(a.target.value),required:!0,className:"h-12"})]}),e.jsx(i,{type:"submit",className:"w-full",size:"lg",disabled:p,children:p?"Processando...":l?"Criar conta":"Entrar"})]}),e.jsx("div",{className:"text-center",children:e.jsx(i,{variant:"link",type:"button",className:"p-0 h-auto",onClick:()=>N(!l),children:l?"Já tem uma conta? Faça login":"Não tem uma conta? Crie uma agora"})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(M,{})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"ou"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{variant:"apple",className:"w-full justify-start",size:"lg",onClick:()=>c.info("Login com Apple em breve"),children:[e.jsx(U,{className:"w-5 h-5"}),"Entrar com Apple"]}),e.jsxs(i,{variant:"google",className:"w-full justify-start",size:"lg",onClick:z,children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Entrar com Google"]})]})]})]})]})})};export{K as default};
